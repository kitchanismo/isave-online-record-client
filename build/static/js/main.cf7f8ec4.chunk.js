(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=a(136),o=(a(69),a(10)),i=a(130),u=a(3),m=a.n(u),d=a(5),p=a(6),b=a(23),f=a.n(b),h=a(13);f.a.interceptors.response.use(function(e){return e},function(e){return function(e){if(e.response&&e.response.data.status&&"ExpiredJwtToken"===e.response.data.status.name)return o.toast.error("Please Logout!"),Promise.reject(e);e.response&&e.response.status>=400&&e.response.status<500||(o.toast.error("An unexpected error occurrred."),console.log(e));return Promise.reject(e)}(e)}),f.a.interceptors.request.use(function(e){return e.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL||h.a,e});var g={get:f.a.get,post:f.a.post,put:f.a.put,delete:f.a.delete,axios:f.a,sendJwt:function(e){var t=e.token;f.a.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat(t),e})}};var E=a(54),v=a.n(E);function N(e){var t=e.token,a=e.refreshToken;localStorage.setItem("access-token",t),localStorage.setItem("refresh-token",a)}function y(){return(y=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/login",t).then(function(e){N(e.data.jwt)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function w(){return(w=Object(p.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/sign-up",t).then(function(e){return e.data});case 2:return a=e.sent,a.jwt,e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(){try{var e=localStorage.getItem("access-token");return Object(d.a)({},v()(e))}catch(t){return null}}var x=function(){return{token:localStorage.getItem("access-token"),refreshToken:localStorage.getItem("refresh-token")}},O={login:function(e){return y.apply(this,arguments)},signUp:function(e){return w.apply(this,arguments)},logout:function(){g.sendJwt(x()),localStorage.removeItem("refresh-token"),localStorage.removeItem("access-token"),g.post("/token/revoke",{refreshToken:x().refreshToken})},getCurrentUser:function(){return j()?Object(d.a)({},j().data):null},isUsernameTaken:function(e){return g.get("/auth/is-taken?username="+e).then(function(e){return e.data})},isEmailTaken:function(e){return g.get("/auth/is-taken?email="+e).then(function(e){return e.data})},jwt:x,isValidUser:function(){return!!j()},isAdmin:function(){return"admin"===j().data.position},isAdminOrManager:function(){var e=j().data.position;return"manager"===e||"admin"===e}},k=a(31),S=a.n(k),C=a(4),A=a.n(C);function D(e,t){return S.a.orderBy(e,[t.path],[t.order])}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=e.substring(0,t),n=e.length>t?"...":"";return"".concat(a," ").concat(n)}var F=function(e){return e?new Date(e).toLocaleDateString():null},P=function(e){return A.a.string().required().regex(/^[A-Za-z\s]*$/).error(function(t){return t.forEach(function(t){switch(t.type){case"any.empty":t.message='"'.concat(e,'" is not allowed to be empty');break;case"string.regex.base":t.message='"'.concat(e,'" must NOT have a number or special character')}}),t}).label(e)},T=function(e){var t=e.id,a=e.name;return{id:t,label:M(a),value:a}},M=function(e){return S.a.startCase(e)},U=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("h6",{className:"text-white mt-1"},r.a.createElement("span",{style:{color:h.d.secondary}},"COCOLIFE "),": Hybrid Management Information System with SMS Notification"),r.a.createElement("div",{className:"collapse navbar-collapse d-flex justify-content-end",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},O.isValidUser()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item ml-1"},r.a.createElement(i.a,{className:"nav-link active",to:"/users/".concat(O.getCurrentUser().id)},M(O.getCurrentUser().username)+" | "+M(O.getCurrentUser().position))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/login",className:"nav-link",onClick:function(){O.logout()}},"Logout")))))),r.a.createElement("style",{jsx:""},"\n          .navbar {\n            margin-bottom: 20px;\n          }\n          .fa {\n            margin-top: 12px !important;\n          }\n\n          i {\n            cursor: pointer;\n          }\n        ")))},B=a(137),R=a(129),q=a(135),L=a(7),_=a(2),G=function(e){return function(t){return r.a.createElement(e,Object.assign({auth:O},t))}},J=a(103),V=r.a.createContext({}),z=r.a.createContext({}),H=G(function(e){var t=e.auth,a=Object(L.a)(e,["auth"]),c=Object(n.useState)(!1),s=Object(_.a)(c,2),l=s[0],o=s[1],u=Object(n.useContext)(V),m=u.state.unverify,d=u.onSetStatus,p=Object(n.useContext)(z).status,b=p.total,f=p.forApproval,g=p.lapsed,E=p.nearExpiration,v=(p.due,function(e,t,a){return r.a.createElement(J.a,{onClick:function(){return o(!1)},className:"dropdown-item",to:"/reports/".concat(e)},t,r.a.createElement("span",{className:"badge badge-sm badge-secondary ml-2 mt-0"},a||""))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"side-menu col-md-2 d-none d-md-block bg-dark mr-0 pt-3"},r.a.createElement("ul",{className:"nav flex-column mb-2 mt-2 pr-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{onClick:function(){return o(!1)},name:"dashboard",to:"/dashboard",className:"nav-link text-white "},"Dashboard")),t.isAdmin()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{onClick:function(){return o(!1)},name:"branch",to:"/branches",className:"nav-link text-white"},"Branch")),t.isAdminOrManager()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"d-flex ml-3"},r.a.createElement(i.a,{onClick:function(){o(!1),d(null)},to:"/users",className:"nav-link text-white pr-1"},"Users")),r.a.createElement("div",{className:"m-0 p-0"},r.a.createElement(J.a,{"data-toggle":"tooltip",title:"You have ".concat(m," unverify user/s!"),onClick:function(){o(!1),d(0)},to:"/users",className:"nav-link text-white pt-0 pl-0"},r.a.createElement("span",{className:"badge badge-sm badge-danger ml-1"},m||""))))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"d-flex ml-3"},r.a.createElement("a",{onClick:function(){return o(!l)},className:"nav-link text-white pr-1"},"Reports",r.a.createElement("span",{className:"fa fa-angle-".concat(l?"up":"down"," ml-1")}))),r.a.createElement("div",{className:"m-0 p-0"},r.a.createElement("a",{"data-toggle":"tooltip",title:"You have ".concat(b," client reports!"),className:"nav-link text-white pt-1 pl-0"},r.a.createElement("span",{className:"badge badge-sm badge-danger ml-1"},b||"")))),l&&r.a.createElement("div",{className:"dropdown"},v("for-approval","For Approval",f),v("near-expiration","Near Expiration",E),v("lapsed","Lapsed Policy",g),r.a.createElement("hr",{className:"mx-2"}),v("enforced","Enforced Client"),v("gpa","GPA"),v("cancelled","Cancelled Policy"),t.isAdminOrManager()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",{className:"mx-2"}),v("user-archived","User Archived"))))),r.a.createElement("style",{jsx:""},"\n          .badge-danger {\n            margin-top: -5px;\n          }\n          .active {\n            color: ".concat(h.d.secondary," !important;\n            cursor: hand;\n          }\n          .nav-link {\n            cursor: pointer;\n          }\n          a:hover {\n            color: #ddd !important;\n          }\n\n          hr {\n            margin-top: 3;\n            border: 0.5px solid gray;\n          }\n          .side-menu {\n            border-radius: 5px 0 0 0;\n          }\n          .dropdown {\n            margin-left: 30px;\n            padding-right: 0 !important;\n            background-color: white;\n            z-index: 2 !important;\n            border-radius: 3px !important;\n            padding-top: 10px;\n\n            padding-bottom: 10px;\n            border: 1px solid #343a40;\n          }\n          .dropdown-item {\n            font-size: 14px;\n          }\n          .dropdown-item:hover {\n            color: gray !important;\n          }\n        "))),a.children)}),Y=a(40),Z=a.n(Y);function $(e){return g.post("/api/clients",e).then(function(e){return e.data})}function Q(){return g.sendJwt(O.jwt()),g.get("/api/clients/status").then(function(e){return e.data})}function W(e){return g.sendJwt(O.jwt()),g.get("/api/clients/show/"+e).then(function(e){return e.data})}function X(e,t){return g.sendJwt(O.jwt()),g.put("/api/clients/approved/"+e,{codeNo:t}).then(function(e){return e})}function K(e,t){return g.sendJwt(O.jwt()),g.put("/api/clients/edit/"+e,t).then(function(e){return e})}function ee(e){return g.sendJwt(O.jwt()),g.put("/api/clients/enforced/"+e.id,Object(d.a)({},e)).then(function(e){return e})}function te(e){return g.sendJwt(O.jwt()),g.put("/api/clients/cancelled/"+e,{}).then(function(e){return e})}function ae(e){return g.sendJwt(O.jwt()),g.put("/api/clients/retrieved/"+e,{}).then(function(e){return e})}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(p.a)(m.a.mark(function e(t){var a,n=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.next=3,g.get(t).then(function(e){return e.data}).then(function(e){var t=e.branches;return a?t:t.map(function(e){return T(e)})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ce(e,t){return g.put("/api/branches/edit/"+e,t).then(function(e){return e.data})}function se(e){return le.apply(this,arguments)}function le(){return(le=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.sendJwt(O.jwt()),e.next=3,g.post("/api/users",t).then(function(e){return e.data});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function oe(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(p.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.sendJwt(O.jwt()),e.next=3,g.put("/api/users/"+t,a).then(function(e){return e.data});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ue(e){return me.apply(this,arguments)}function me(){return(me=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/api/branches/managers/".concat(t)).then(function(e){return e.data.fullname});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function de(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;return g.sendJwt(O.jwt()),g.get("/api/users/page/".concat(e,"?limit=").concat(t,"&status=").concat(n,"&search=").concat(a)).then(function(e){return e.data.data})}function pe(e){return g.sendJwt(O.jwt()),g.get("/api/users/".concat(e)).then(function(e){return e.data.user})}var be=function(e){var t=Object(n.useState)([]),a=Object(_.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),l=Object(_.a)(s,2),o=l[0],i=l[1],u=Object(n.useState)(!1),m=Object(_.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)(function(){var t;c([]),p(!1),"user-archived"===e?(g.sendJwt(O.jwt()),g.get("/api/users/archived").then(function(e){return e.data.archived})).then(function(e){c(e),p(!0)}):(t=e,g.sendJwt(O.jwt()),g.get("/api/clients/"+t).then(function(e){return e.data.clients})).then(function(e){c(e),p(!0)})},[e,o]),{reports:r,setRefresh:i,setReports:c,isLoaded:d}},fe=function(e){e.dimension;var t=be("near-expiration"),a=t.reports,c=void 0===a?[]:a,s=t.isLoaded,l=Object(n.useState)([{name:"series-1",data:[]}]),o=Object(_.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)([{name:"series-1",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]),d=Object(_.a)(m,2),p=d[0];d[1];Object(n.useEffect)(function(){var e;(g.sendJwt(O.jwt()),g.post("/api/clients/statistic/",{year:e}).then(function(e){return e.data.statistic})).then(function(e){u([{name:"series-1",data:e}])})},[]);var b=Object(n.useState)({theme:{palette:"palette6"},chart:{id:"basic-bar"},xaxis:{categories:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},title:{text:"2019 Client Statistic",align:"center",margin:0,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"20px",color:h.d.secondary}},grid:{show:!0,borderColor:"black",strokeDashArray:1,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:0,bottom:0,left:0}}}),f=Object(_.a)(b,2),E=f[0],v=(f[1],Object(n.useState)({theme:{palette:"palette6"},chart:{id:"basic-bar"},xaxis:{categories:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},title:{text:"Total FSF",align:"center",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"20px",color:h.d.secondary}},grid:{show:!0,borderColor:"black",strokeDashArray:1,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:0,bottom:0,left:0}}})),N=Object(_.a)(v,2),y=N[0];N[1];return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-around"},r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"header-list pb-0 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-bold"},"Client Near Expiration"),r.a.createElement("span",{className:"badge badge-danger badge-pill"},c.length?c.length:"")),r.a.createElement("li",{className:"header-list py-1 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-light"},"Name"),r.a.createElement("span",{className:"font-weight-light"},"Due Date")),r.a.createElement("div",{className:"wrapper-list"},c.map(function(e){return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"".concat(e.lastname,", ").concat(e.firstname," ").concat(e.middlename),r.a.createElement("span",{className:"badge badge-warning badge-pill"},F(e.expiredDate)))}),0===c.length&&s&&r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"No record/s found!"))),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"header-list pb-0 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-bold"},"SPIF")),r.a.createElement("li",{className:"header-list py-1 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-light"},"Tab"),r.a.createElement("span",{className:"font-weight-light"},"Tab")),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"No record/s found!"))),r.a.createElement("div",{className:"row d-flex justify-content-around"},r.a.createElement(Z.a,{key:"Sales",type:"line",options:E,series:i,width:"400px"}),r.a.createElement(Z.a,{key:"FSF",type:"line",options:y,series:p,width:"400px"})),r.a.createElement("style",{jsx:""},"\n        .list-group {\n          width: 400px !important;\n        }\n        .header-list {\n          background-color: ".concat(h.d.secondary,";\n          border-color: ").concat(h.d.secondary,";\n          color: white;\n        }\n\n        .wrapper-list {\n          margin: 0;\n          padding: 0;\n          height: 180px;\n          overflow-y: auto;\n          overflow-x: hidden;\n        }\n      "))))},he=G(function(e){var t=e.auth,a=Object(L.a)(e,["auth"]),n="sales"===t.getCurrentUser().position;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Dashboard"),!n&&"admin"!==t.getCurrentUser().position&&r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return a.history.replace("/dashboard/new-fs")},className:"btn btn-sm btn-grad-secondary"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"FUTURE SAVINGS"),r.a.createElement("button",{onClick:function(){return a.history.replace("/dashboard/new-gpa")},className:"btn btn-sm btn-grad-secondary  ml-2"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"GPA FORM"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mt-3"},r.a.createElement(fe,null))),r.a.createElement("style",{jsx:""},"\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))}),ge=a(29),Ee=function(e){var t=e.name,a=e.label,n=e.error,c=e.icon,s=void 0===c?"":c,l=Object(L.a)(e,["name","label","error","icon"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text p-0"},s&&r.a.createElement("span",{className:"fa ".concat(s," p-0 m-2")}))),r.a.createElement("input",Object.assign({},l,{name:t,id:t,className:"form-control"}))),n&&r.a.createElement("p",{className:"error-message text-danger p-1"},n),r.a.createElement("style",{jsx:""},"\n        .error-message {\n          font-size: 13px;\n        }\n      "))},ve=a(61),Ne=a(34),ye=(a(111),function(e){var t=Object(n.useState)(!1),a=Object(_.a)(t,2),c=a[0],s=a[1],l=e.data||{},o=l.data,i=l.setData,u=e.errors||{},m=u.errors,p=u.setErrors,b=Object(d.a)({},e.schema),f=function(){var e=A.a.validate(o,b,{abortEarly:!1}).error;if(!e)return null;var t={},a=!0,n=!1,r=void 0;try{for(var c,s=e.details[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var l=c.value;t[l.path[0]]=l.message}}catch(i){n=!0,r=i}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return t},h=function(e){var t=e.currentTarget,a=Object(d.a)({},m),n=function(e){var t=e.name,a=e.value,n=Object(ge.a)({},t,a),r=Object(ge.a)({},t,b[t]),c=A.a.validate(n,r).error;return c?c.details[0].message:null}(t);n?a[t.name]=n:delete a[t.name];var r=g(t,a,o.password),c=Object(d.a)({},o);c[t.name]=t.value,i(c),p(r)},g=function(e,t,a){var n=Object(d.a)({},t);return"confirmPassword"===e.name&&e.value===a&&delete n[e.name],n};return r.a.createElement("form",{onSubmit:function(t){return function(e,t){e.preventDefault();var a=f();p(a||{}),a||(s(!0),t(e,o).then(function(){return s(!1)}).catch(function(){return s(!0)}))}(t,e.onSubmit)}},e.children({renderButton:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.a.createElement("button",{className:"btn btn-grad-primary mt-3 ".concat(n?"btn-block":"")},r.a.createElement("span",{className:"".concat(t," mr-1")}),c?a:e)},renderInput:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return r.a.createElement(Ee,Object.assign({type:a,name:e,value:o[e],label:t,onChange:h,error:m[e],icon:n},c))},renderTextArea:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e},t),r.a.createElement("textarea",{value:o[e],onChange:h,className:"form-control",id:e,rows:a,name:e}),m[e]&&r.a.createElement("div",{className:"alert p-2 mt-2 alert-danger"},m[e]))},renderDatePicker:function(e,t,a){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e},t),r.a.createElement("div",null,r.a.createElement(ve.a,Object.assign({peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",placeholderText:"Select a date",className:"form-control",value:o[e],onBlur:function(){var t=Object(d.a)({},m);delete t[e],p(t)}},a))),m[e]&&r.a.createElement("p",{className:"error-message text-danger p-1"},m[e]))},renderSelect:function(e,t,a,n,c,s){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e},t),r.a.createElement(Ne.a,Object.assign({},s,{isSearchable:!0,isClearable:!0,value:a,onBlur:function(){var t=Object(d.a)({},m);delete t[e],p(t)},onChange:function(t){n(t),i(Object(d.a)({},o,Object(ge.a)({},e,t?t.value:"")))},options:c})),m[e]&&r.a.createElement("p",{className:"error-message text-danger p-1"},m[e]))},renderCheckbox:function(e,t,a){return r.a.createElement("div",{className:"form-check"},r.a.createElement("input",Object.assign({type:"checkbox",checked:o[e],name:e,className:"form-check-input",id:e},a)),r.a.createElement("label",{className:"form-check-label",htmlFor:e},t))}}))}),we=function(e){var t=Object(n.useContext)(z),a=t.onAddClient,c=(t.status,Object(n.useState)({firstname:"",lastname:"",middlename:"",address:"",contact:"",birthdate:"",dateInsured:F(Date.now()),expiredDate:"",codeNo:"",userInsured:"",gender:"",mode:"",civil:"",forApproval:!0})),s=Object(_.a)(c,2),l=s[0],i=s[1],u=Object(n.useState)(null),b=Object(_.a)(u,2),f=b[0],h=b[1],g=Object(n.useState)(null),E=Object(_.a)(g,2),v=E[0],N=E[1],y=Object(n.useState)(null),w=Object(_.a)(y,2),j=w[0],x=w[1],k=Object(n.useState)({}),S=Object(_.a)(k,2),C=S[0],D=S[1],I={firstname:P("Firstname"),middlename:P("Middlename"),lastname:P("Lastname"),codeNo:l.forApproval?A.a.optional():A.a.string().regex(/^[a-zA-Z0-9-]+$/).error(function(e){return e.forEach(function(e){switch(e.type){case"string.regex.base":e.message='"Policy Number" must only have a number and letter with hyphen';break;case"string.min":case"string.max":e.message='"Policy Number" must be equal to 15 characters long'}}),e}).min(15).max(15).label("Policy Number"),contact:A.a.optional(),address:A.a.optional(),expiredDate:A.a.optional(),birthdate:A.a.string().required().label("Birthdate"),dateInsured:A.a.string().required().label("Date Insured"),forApproval:A.a.optional(),userInsured:A.a.optional(),gender:A.a.string().required().label("Gender"),mode:A.a.string().required().label("Mode of Payment"),civil:A.a.string().required().label("Civil Status")},T=function(e){return h(e)},M=function(e){return x(e)},U=function(e){N(e)},B=function(e,t){var a=new Date(e),n=new Date(a);return n.setMonth(a.getMonth()+J(t)),F(n)},R=function(){var e=Object(p.a)(m.a.mark(function e(t,n){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.forApproval||""!==n.codeNo){e.next=3;break}return D({codeNo:'"Policy Number" is not allowed to be empty'}),e.abrupt("return");case 3:return r=B(n.dateInsured,n.mode),c=Object(d.a)({},n,{dateInsured:new Date(n.dateInsured).toISOString(),expiredDate:new Date(r).toISOString(),userInsured:O.getCurrentUser().id}),e.prev=5,e.next=8,a(c);case 8:o.toast.success("Saved"),i({firstname:"",lastname:"",middlename:"",address:"",contact:"",dateInsured:"",birthdate:"",codeNo:"",userInsured:"",gender:"",mode:"",civil:"",forApproval:!0}),h(null),N(null),x(null),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}},e,this,[[5,15]])}));return function(t,a){return e.apply(this,arguments)}}(),q=[{id:1,label:"Male",value:"male"},{id:2,label:"Female",value:"female"}],L=[{id:1,value:"single",label:"Single"},{id:2,value:"divorced",label:"Divorced"},{id:3,value:"widowed",label:"Widowed"}],G=[{id:1,value:"monthly",label:"Monthly"},{id:2,value:"quarterly",label:"Quarterly"},{id:3,value:"semi",label:"Semi-Annually"},{id:4,value:"annually",label:"Annually"}],J=function(e){switch(e){case"monthly":return 1;case"quarterly":return 3;case"semi":return 6;case"annually":return 12;default:return 0}},V=function(e){i(Object(d.a)({},l,{dateInsured:F(e)}))},H=function(e){i(Object(d.a)({},l,{birthdate:F(e)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Future Savings")),r.a.createElement(ye,{data:{data:l,setData:i},errors:{errors:C,setErrors:D},onSubmit:R,schema:I},function(t){var a=t.renderInput,n=t.renderSelect,c=t.renderTextArea,s=t.renderDatePicker,o=t.renderButton,u=t.renderCheckbox;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("gender","Gender",f,T,q),n("civil","Civil Status",j,M,L),s("birthdate","Birthdate",{onChange:H}),a("contact","Contact"),c("address","Address")),r.a.createElement("div",{className:"col-6"},s("dateInsured","Date Insured",{onChange:V}),n("mode","Mode of Payment",v,U,G),!l.forApproval&&a("codeNo","Policy No"),u("forApproval","For Approval",{onChange:function(e){return i(Object(d.a)({},l,{codeNo:"",forApproval:e.target.checked}))}}),o("Save",null,"Saving...",!0),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/dashboard")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back")))}))},je=function(e){var t=Object(n.useContext)(z).onAddClient,a=Object(n.useState)({firstname:"",lastname:"",middlename:"",birthdate:"",address:"",contact:"",codeNo:"",gender:"",coverage:0}),c=Object(_.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(null),u=Object(_.a)(i,2),b=u[0],f=u[1],h=Object(n.useState)(null),g=Object(_.a)(h,2),E=g[0],v=g[1],N=Object(n.useState)({}),y=Object(_.a)(N,2),w=y[0],j=y[1],x={firstname:P("Firstname"),middlename:P("Middlename"),lastname:P("Lastname"),birthdate:A.a.string().required().label("Birthdate"),gender:A.a.string().required().label("Gender"),coverage:A.a.number().required().label("Coverage"),contact:A.a.optional(),address:A.a.optional(),codeNo:A.a.number().required().label("Code Number")},O=function(e){return f(e)},k=function(e){return v(e)},S=function(){var e=Object(p.a)(m.a.mark(function e(a,n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(Object(d.a)({},n,{isGPA:!0}));case 3:o.toast.success("Saved"),l({firstname:"",lastname:"",middlename:"",address:"",contact:"",codeNo:"",gender:"",birthdate:"",coverage:0}),v(null),f(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}(),C=[{id:1,label:"Male",value:"smale"},{id:2,label:"Female",value:"female"}],D=[{id:1,label:"1 Year",value:1},{id:2,label:"2 Years",value:2},{id:3,label:"3 Years",value:3}],I=function(e){l(Object(d.a)({},s,{birthdate:F(e)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"GPA Form")),r.a.createElement(ye,{data:{data:s,setData:l},errors:{errors:w,setErrors:j},onSubmit:S,schema:x},function(t){var a=t.renderInput,n=t.renderSelect,c=t.renderTextArea,s=t.renderDatePicker;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("gender","Gender",E,k,C),s("birthdate","Birthdate",{onChange:I}),a("contact","Contact"),c("address","Address")),r.a.createElement("div",{className:"col-6"},a("codeNo","GPA No."),n("coverage","Coverage",b,O,D),r.a.createElement("button",{className:"btn btn-grad-primary btn-block",name:"back"},"Save"),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/dashboard")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back")))}))},xe=function(e){e.onRefresh;var t=Object(L.a)(e,["onRefresh"]),a=Object(n.useState)({name:"",address:"",contact:""}),c=Object(_.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)({}),u=Object(_.a)(i,2),b=u[0],f=u[1],h={name:A.a.string().required().label("Name"),address:A.a.optional(),contact:A.a.optional()},E=function(){var e=Object(p.a)(m.a.mark(function e(a,n){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(a);case 2:if(r=e.sent,!(Object.keys(r).length>0)){e.next=6;break}return f(r),e.abrupt("return");case 6:try{(s=n,g.post("/api/branches",s).then(function(e){return e.data})).then(function(){return t.history.replace("/branches")}),o.toast.success("Saved")}catch(l){(c=l.response)&&401===c.status&&o.toast.error(c.data.status.errors)}case 7:case"end":return e.stop()}var s},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n,r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget,e.next=3,s=a.value,g.get("/api/branches/is-taken?name="+s).then(function(e){return e.data});case 3:return n=e.sent,r=n.isTaken,c=Object(d.a)({},b),r&&(c[a.name]='"'.concat(a.value,'" is taken')),f(c),e.abrupt("return",c);case 9:case"end":return e.stop()}var s},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Branch")),r.a.createElement("div",{className:"col-6 offset-3"},r.a.createElement(ye,{data:{data:s,setData:l},errors:{errors:b,setErrors:f},onSubmit:E,schema:h},function(e){var t=e.renderInput,a=e.renderButton,n=e.renderTextArea;return r.a.createElement(r.a.Fragment,null,t("name","Name","name",""),n("address","Address","address"),t("contact","Contact","contact"),a("ADD",null,"Adding...",!0))}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),t.history.replace("/branches")},className:"btn btn-grad-secondary btn-block mt-3",name:"back"},"Back")),r.a.createElement("style",{jsx:""},"\n        .spinner {\n          margin-top: 200px;\n        }\n      "))},Oe=function(e){return r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,e.columns.map(function(t,a){return r.a.createElement("th",{className:"clickable",key:a,onClick:function(){return function(t){var a=Object(d.a)({},e.sortColumn);a.path===t?a.order="asc"===a.order?"desc":"asc":(a.path=t,a.order="asc"),e.onSort(a)}(t.path)}},t.label," ",function(t){var a=e.sortColumn;return t.path?t.path!==a.path?null:"asc"===a.order?r.a.createElement("i",{className:"fa fa-sort-asc"}):r.a.createElement("i",{className:"fa fa-sort-desc"}):null}(t))})),r.a.createElement("style",{jsx:""},"\n        .table .thead-dark th {\n          color: #fff;\n          background-color: #343a40 !important;\n          border-color: #32383e;\n        }\n      "))},ke=function(e){var t=e.data,a=e.columns;return r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},a.map(function(t,a){return r.a.createElement("td",{key:a},function(e,t){return t.content?t.content(e):S.a.get(e,t.path)}(e,t))}))}))},Se=function(e){var t=e.columns,a=e.sortColumn,n=e.onSort,c=e.data;return r.a.createElement("table",{className:"table table-bordered table-hover "},r.a.createElement(Oe,{columns:t,sortColumn:a,onSort:n}),r.a.createElement(ke,{columns:t,data:c}))},Ce=function(e){var t=e.branches,a=e.setBranches,c=(Object(L.a)(e,["branches","setBranches"]),Object(n.useState)({path:"name",order:"asc"})),s=Object(_.a)(c,2),l=s[0],o=s[1],i=[{path:"id",label:"#"},{path:"name",label:"Name"},{path:"manager",label:"Manager"},{path:"address",label:"Address"},{path:"contact",label:"Contact"},{key:"actions",label:"Action",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(J.a,{to:"/branches/edit/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-warning ml-1"},"EDIT"))))}}];return r.a.createElement(Se,{columns:i,data:t.map(function(e){return e.address=I(e.address,15),e.manager=null!==e.manager?I(e.manager,10):e.manager,e}),sortColumn:l,onSort:function(e){o(e),a(D(t,e))}})},Ae=function(e){var t=e.width,a=void 0===t?40:t,n=e.heigth,c=void 0===n?40:n,s=e.color,l=void 0===s?"#03995b":s,o=e.duration,i=void 0===o?"640ms":o,u=e.isLoaded,m=void 0!==u&&u,d=e.className,p=Object(L.a)(e,["width","heigth","color","duration","isLoaded","className"]);return m?p.children:r.a.createElement("div",{className:"d-flex justify-content-center ".concat(d)},r.a.createElement("svg",{version:"1.0",width:"".concat(a,"px"),height:"".concat(c,"px"),viewBox:"0 0 128 128"},r.a.createElement("g",null,r.a.createElement("circle",{cx:"16",cy:"64",r:"16",fill:l,fillOpacity:"1"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"14.344",fill:l,fillOpacity:"1",transform:"rotate(45 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"12.531",fill:l,fillOpacity:"1",transform:"rotate(90 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"10.75",fill:l,fillOpacity:"1",transform:"rotate(135 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"10.063",fill:l,fillOpacity:"1",transform:"rotate(180 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"8.063",fill:l,fillOpacity:"1",transform:"rotate(225 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"6.438",fill:l,fillOpacity:"1",transform:"rotate(270 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"5.375",fill:l,fillOpacity:"1",transform:"rotate(315 64 64)"}),r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",values:"0 64 64;315 64 64;270 64 64;225 64 64;180 64 64;135 64 64;90 64 64;45 64 64",calcMode:"discrete",dur:i,repeatCount:"indefinite"}))))},De=function(e){var t=function(){var e=Object(n.useState)([]),t=Object(_.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(_.a)(c,2),l=s[0],o=s[1],i=Object(n.useState)(!1),u=Object(_.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)(function(){d(!1),ne("/api/branches",!0).then(function(e){d(!0),r(e)})},[l]),{branches:a,setRefresh:o,setBranches:r,isLoaded:m}}(),a=t.branches,c=(t.setRefresh,t.setBranches),s=t.isLoaded;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Branch"),r.a.createElement("button",{onClick:function(){return e.history.replace("/branches/new")},className:"btn btn-sm btn-grad-secondary ml-1"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"BRANCH")),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-12 side-content pt-4"},r.a.createElement(Ae,{isLoaded:s,className:"spinner"},r.a.createElement(Ce,{branches:a,setBranches:c})))),r.a.createElement("style",{jsx:""},"\n        .side-content {\n          border-radius: 5px 0 0 5px;\n        }\n        .spinner {\n          margin-top: 200px;\n        }\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))},Ie=function(e){var t=h.c.pageNumbers,a=Object(n.useContext)(V),c=a.state,s=c.pageNum,l=c.pages,o=c.start,i=c.end,u=a.onPageChange,m=a.onSetStart,d=a.onSetEnd;Object(n.useEffect)(function(){i>l&&1!==o&&(p(),b())},[s]);var p=function(){return m(o-1)},b=function(){return d(i-1)},f=function(e){s!==e&&u(e)},g=function(e){f(e+1),i!==l&&(m(o+1),d(i+1))},E=function(){return l>t},v=function(){return 1===s?"disabled":""},N=function(){return l===s?"disabled":""};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col d-flex justify-content-start px-0"},r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},E()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"page-item ".concat(v())},r.a.createElement("button",{className:"page-link",onClick:function(){1!==s&&(f(1),m(1),d(t))}},"first")),r.a.createElement("li",{className:"page-item ".concat(v())},r.a.createElement("button",{className:"page-link","aria-label":"Previous",onClick:function(){return f(s-1),void(1!==o&&(p(),b()))}},"\xab"))),l>1&&function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a}(o,l<t?l:i).map(function(e){return r.a.createElement("li",{key:e,className:s===e?"page-item active":"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(){return f(e)}},e))}),E()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"page-item ".concat(N())},r.a.createElement("button",{className:"page-link","aria-label":"Next",onClick:function(){return g(s)}},"\xbb")),r.a.createElement("li",{className:"page-item ".concat(N())},r.a.createElement("button",{className:"page-link",onClick:function(){f(l),m(l-(t-1)),d(l)}},"last")))))),r.a.createElement("div",{className:"pages px-0 col d-flex justify-content-end"},r.a.createElement("p",{className:"page-of"},"".concat(s," of ").concat(l))),r.a.createElement("style",{jsx:""},"\n            .pages {\n              text-align: right;\n            }\n            .page-of {\n              margin-top: 10px;\n            }\n            .page-item.active .page-link {\n              z-index: 1;\n              color: #fff;\n              background-color: ".concat(h.d.secondary,";\n              border-color: ").concat(h.d.secondary,";\n            }\n\n            .page-link {\n              color: ").concat(h.d.secondary,";\n            }\n            .page-link:hover {\n              color: ").concat(h.d.secondary,";\n            }\n          "))))},Fe=a(134),Pe=a(131),Te=a(132),Me=a(133),Ue=function(e){var t=e.label,a=e.primary,n=e.secondary,c=e.modal,s=e.toggle,l=e.className,o=e.title,i=Object(L.a)(e,["label","primary","secondary","modal","toggle","className","title"]);return r.a.createElement(Fe.a,Object.assign({isOpen:c,toggle:s,className:"".concat(l)},i),r.a.createElement(Pe.a,{toggle:s},o),r.a.createElement(Te.a,null,t),r.a.createElement(Me.a,null,r.a.createElement("button",{className:"btn btn-".concat(a&&a.type||"primary"," btn-sm"),name:"primary",onClick:s},a&&a.label||"Ok")," ",r.a.createElement("button",{className:"btn btn-".concat(n&&n.type||"secondary"," btn-sm"),name:"secondary",onClick:s},n&&n.label||"Cancel")))},Be=function(e){var t=e.handleSearch,a=e.placeholder,c=void 0===a?"Search here":a,s=Object(n.useState)(""),l=Object(_.a)(s,2),o=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return t({e:e,search:o})}},r.a.createElement("input",{type:"text",name:o,value:o,onChange:function(e){i(e.target.value)},className:"form-control",placeholder:c}),r.a.createElement("button",{className:"btn btn-grad-primary ml-2"},"SEARCH"),r.a.createElement("button",{onClick:function(){return i("")},className:"btn btn-grad-secondary ml-2"},"REFRESH")),r.a.createElement("style",{jsx:""},"\n        form {\n          display: flex;\n        }\n        .btn-search {\n          width: 15%;\n        }\n      "))},Re=G(function(e){var t=e.auth,a=Object(L.a)(e,["auth"]),c=Object(n.useContext)(V),s=c.state,l=s.users,o=s.pageNum,i=s.start,u=s.end,d=s.notFound,b=c.onDelete,f=c.onRefresh,E=c.onPageChange,v=c.onSort,N=c.onSearch,y=c.onSetStart,w=c.onSetEnd,j=c.onSetStatus,x=Object(n.useState)({}),k=Object(_.a)(x,2),S=k[0],C=k[1],A=Object(n.useState)({path:"name",order:"asc"}),D=Object(_.a)(A,2),I=D[0],F=D[1],P=[{path:"id",label:"#"},{path:"username",label:"Username"},{path:"profile.lastname",key:"fullname",label:"Fullname",content:function(e){return"".concat(e.profile.firstname,", ").concat(e.profile.middlename," ").concat(e.profile.lastname)}},{path:"position",label:"Position"},{path:"profile.branch.name",label:"Branch"},{path:"profile.codeNo",key:"codeNo",label:"Code #",content:function(e){return e.profile.codeNo}},{path:"status",key:"status",label:"Status",content:function(e){return r.a.createElement("span",{onClick:function(){var t=Object(p.a)(m.a.mark(function t(a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return C(e),t.next=3,R(a);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),className:"badge badge-".concat(1===e.status?"success":"danger")},1===e.status?"active":"inactive")}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement(J.a,{to:"/users/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary ml-1"},"VIEW")),r.a.createElement(J.a,{to:"/users/edit/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-warning ml-1"},"EDIT")),r.a.createElement("button",{onClick:function(t){C(e),Y(t).then(function(e){return e})},className:"btn btn-sm btn-outline-danger ml-1",name:"delete"},"ARCHIVE")))}}],T=Object(n.useState)(!1),M=Object(_.a)(T,2),U=M[0],B=M[1],R=function(){var e=Object(p.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,B(function(e){return!e}),!a||"primary"!==a.name){e.next=7;break}return e.next=5,n=S.id,g.sendJwt(O.jwt()),g.get("/api/users/status/".concat(n)).then(function(e){return e.data.data});case 5:C({}),f();case 7:case"end":return e.stop()}var n},e,this)}));return function(t){return e.apply(this,arguments)}}(),q=Object(n.useState)(!1),G=Object(_.a)(q,2),z=G[0],H=G[1],Y=function(){var e=Object(p.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,H(function(e){return!e}),!a||"primary"!==a.name){e.next=7;break}return e.next=5,Z(S);case 5:C({}),f();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:if(e.sent){e.next=7;break}return E(o-1),i>1&&y(i-1),w(u-1),e.abrupt("return");case 7:f();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(m.a.mark(function e(t){var n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.e,r=t.search,n.preventDefault(),a.history.replace("/users"),j(null),y(1),w(h.c.pageNumbers),E(1),N(r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{title:"Cocolife",modal:U,toggle:R,label:"".concat(0===S.status?"Activate":"Deactivate"," ").concat(S.username,"?"),primary:{type:"primary",label:"CONFIRM"}}),r.a.createElement(Ue,{title:"Cocolife",modal:z,toggle:Y,label:"Archive ".concat(S.username,"?"),primary:{type:"danger",label:"ARCHIVE"}}),r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Users Management"),t.isAdmin()&&r.a.createElement("button",{onClick:function(){return a.history.replace("/users/new")},className:"btn btn-sm btn-grad-secondary ml-1"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"MANAGER")),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"mb-3"},r.a.createElement(Be,{handleSearch:$,placeholder:"Search here"})),r.a.createElement(Se,{columns:P,data:l,sortColumn:I,onSort:function(e){v(e),F(e)}}),0===l.length&&!d&&r.a.createElement(Ae,{className:"spinner mt-5 pt-5 mb-5"}),d&&r.a.createElement("h6",{className:"mt-2 mb-5"},"No records found!"),l.length>0&&r.a.createElement(Ie,null)),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n        .badge {\n          cursor: pointer;\n          margin-right: 2px !important;\n        }\n        .spinner {\n          margin-bottom: 200px !important;\n        }\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))}),qe=function(e){var t=e.client,a=(e.label,e.primary),c=e.secondary,s=e.modal,l=e.toggle,o=e.className,i=e.title,u=Object(L.a)(e,["client","label","primary","secondary","modal","toggle","className","title"]),m=Object(n.useState)(null),p=Object(_.a)(m,2),b=p[0],f=p[1],h=function(e,t){var a=new Date(e),n=new Date(a);return n.setMonth(a.getMonth()+function(e){switch(e){case"monthly":return 1;case"quarterly":return 3;case"semi":return 6;case"annually":return 12;default:return 0}}(t)),new Date(n).toISOString()},g=new Date(Date.now()).toISOString();return r.a.createElement(Fe.a,Object.assign({isOpen:s,toggle:l,className:"".concat(o)},u),r.a.createElement(Pe.a,{toggle:l},i),r.a.createElement(Te.a,null,r.a.createElement("p",null,"Policy #: ",t.codeNo),r.a.createElement("p",null,"Name: ","".concat(t.firstname," ").concat(t.lastname)),r.a.createElement("p",null,"Date Insured: ",F(g)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"mode"},"Mode of Payment"),r.a.createElement(Ne.a,{isSearchable:!0,isClearable:!0,value:b,onChange:function(e){f(e)},options:[{id:1,value:"monthly",label:"Monthly"},{id:2,value:"quarterly",label:"Quarterly"},{id:3,value:"semi",label:"Semi-Annually"},{id:4,value:"annually",label:"Annually"}]}),!b&&r.a.createElement("p",{className:"error-message text-danger p-1"},'"Mode of Payment is not allowed to be empty"'))),r.a.createElement(Me.a,null,r.a.createElement("button",{className:"btn btn-".concat(a&&a.type||"primary"," btn-sm"),name:"primary",onClick:function(e){b&&(l(e,Object(d.a)({},t,{dateInsured:g,expiredDate:h(t.dateInsured,b?b.value:""),mode:b?b.value:"",userInsured:O.getCurrentUser().id})),f(null))}},a&&a.label||"Ok"),r.a.createElement("button",{className:"btn btn-".concat(c&&c.type||"secondary"," btn-sm"),name:"secondary",onClick:function(e){l(e),f(null)}},c&&c.label||"Cancel")))},Le=function(e){e.label;var t=e.primary,a=e.secondary,c=e.modal,s=e.toggle,l=e.className,o=e.title,i=Object(L.a)(e,["label","primary","secondary","modal","toggle","className","title"]),u=Object(n.useState)(""),m=Object(_.a)(u,2),d=m[0],p=m[1],b=function(){return d?d&&!d.match(/^[a-zA-Z0-9-]+$/)?'"Policy Number" must only have a number and letter with hyphen':d&&15!==d.length?'"Policy Number" must be equal to 15 characters long':null:'"Policy Number" is not allowed to be empty'};return r.a.createElement(Fe.a,Object.assign({isOpen:c,toggle:s,className:"".concat(l)},i),r.a.createElement(Pe.a,{toggle:s},o),r.a.createElement(Te.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"codeNo"},"Enter Policy Number"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("input",{name:"codeNo",id:"codeNo",value:d,onChange:function(e){return p(e.target.value)},className:"form-control"})),r.a.createElement("p",{className:"error-message text-danger p-1"},b()),r.a.createElement("style",{jsx:""},"\n            .error-message {\n              font-size: 13px;\n            }\n          "))),r.a.createElement(Me.a,null,r.a.createElement("button",{className:"btn btn-".concat(t&&t.type||"primary"," btn-sm"),name:"primary",onClick:function(e){b()||(s(e,d),p(null))}},t&&t.label||"Ok"),r.a.createElement("button",{className:"btn btn-".concat(a&&a.type||"secondary"," btn-sm"),name:"secondary",onClick:function(e){s(e),p(null)}},a&&a.label||"Cancel")))},_e=function(e){var t=e.match.params.name,a=Object(n.useState)({path:"name",order:"asc"}),c=Object(_.a)(a,2),s=c[0],l=c[1],o=be(t),i=o.reports,u=o.setReports,m=o.setRefresh,d=o.isLoaded,p=Object(n.useState)(null),b=Object(_.a)(p,2),f=b[0],h=b[1],E=Object(n.useContext)(z),v=E.onApproved,N=E.onCancelled,y=E.onRetrieved,w=E.onEnforced,j=function(e){if(!e)return"N/A";var t=new Date(F(e)),a=Date.now()-t.getTime(),n=new Date(a);return Math.abs(n.getUTCFullYear()-1970)},x=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return j(e.birthdate)}},{path:"gender",label:"Gender"},{path:"codeNo",label:"Code Number"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return F(e.dateInsured)}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(J.a,{to:"/clients/edit/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-warning ml-1"},"EDIT")),r.a.createElement("button",{onClick:function(t){N(e.id).then(function(e){return m(function(e){return!e})})},className:"btn btn-sm btn-outline-danger ml-1",name:"delete"},"CANCELLED")))}}],k=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return F(e.dateInsured)}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{onClick:function(t){h(e),H(t)},className:"btn btn-sm btn-outline-success ml-1",name:"delete"},"APPROVED")))}}],S=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return j(e.birthdate)}},{path:"gender",label:"Gender"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return F(e.dateInsured)}},{path:"expiredDate",label:"Due Date",content:function(e){return F(e.expiredDate)}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{onClick:function(t){h(e),R(t)},className:"btn btn-sm btn-outline-success ml-1",name:"delete"},"ENFORCED")))}}],C=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return j(e.birthdate)}},{path:"gender",label:"Gender"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return F(e.dateInsured)}},{path:"expiredDate",label:"Due Date",content:function(e){return F(e.expiredDate)}}],A=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return j(e.birthdate)}},{path:"gender",label:"Gender"},{path:"codeNo",label:"Code Number"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return F(e.dateInsured)}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{onClick:function(t){y(e.id).then(function(e){return m(function(e){return!e})})},className:"btn btn-sm btn-outline-success ml-1",name:"delete"},"RETRIEVED")))}}],I=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return j(e.birthdate)}},{path:"gender",label:"Gender"},{path:"codeNo",label:"Policy #"},{path:"coverage",label:"Coverage(Year)"}],P=[{path:"id",label:"#"},{path:"username",label:"Username"},{path:"profile.lastname",key:"fullname",label:"Fullname",content:function(e){return e.profile?"".concat(e.profile.firstname,", ").concat(e.profile.middlename," ").concat(e.profile.lastname):""}},{path:"position",label:"Position"},{path:"profile.branch.name",label:"Branch"},{path:"profile.codeNo",key:"codeNo",label:"Code #",content:function(e){var t=e.profile;return t?t.codeNo:""}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("button",{onClick:function(){return(t=e.id,g.sendJwt(O.jwt()),g.get("/api/users/restore/".concat(t)).then(function(e){return e.data})).then(function(e){return m(function(e){return!e})});var t},className:"btn btn-sm btn-outline-primary ml-1"},"RESTORE")))}}],T=Object(n.useState)(!1),M=Object(_.a)(T,2),U=M[0],B=M[1],R=function(e,t){B(function(e){return!e}),e.target&&"primary"===e.target.name&&w(t).then(function(e){m(function(e){return!e}),h(null)})},q=Object(n.useState)(!1),L=Object(_.a)(q,2),G=L[0],V=L[1],H=function(e,t){V(function(e){return!e}),e.target&&"primary"===e.target.name&&v(f.id,t).then(function(e){h(null),m(function(e){return!e})})};return r.a.createElement(r.a.Fragment,null,f&&function(e){return r.a.createElement(qe,{client:e,title:"Cocolife",modal:U,toggle:R,label:"Enforce ".concat(e.firstname,"?"),primary:{type:"primary",label:"CONFIRM"}})}(f),r.a.createElement(Le,{title:"Cocolife",modal:G,toggle:H,primary:{type:"primary",label:"CONFIRM"}}),r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},function(){switch(t){case"enforced":return"Enforced Policy";case"for-approval":return"For Approval";case"lapsed":return"Lapsed Policy";case"cancelled":return"Cancelled Policy";case"near-expiration":return"Near Expiration";case"gpa":return"GPA";case"user-archived":return"User Archived";default:return"Reports"}}()),r.a.createElement("button",{className:"btn btn-sm btn-grad-secondary "},r.a.createElement("span",{className:"fa fa-print mr-1"}),"PRINT")),r.a.createElement("div",{className:"wrapper-client"},r.a.createElement(Ae,{isLoaded:d,className:"spinner mt-5 pt-5"},r.a.createElement(Se,{columns:function(){switch(t){case"enforced":return x;case"for-approval":return k;case"lapsed":return S;case"cancelled":return A;case"near-expiration":return C;case"gpa":return I;case"user-archived":return P}}(),data:i,sortColumn:s,onSort:function(e){l(e),u(D(i,e))}}),d&&0===i.length&&r.a.createElement("h6",{className:"mt-2 mb-5"},"No records found!"))),r.a.createElement("style",{jsx:""},"\n        .fa-print {\n          margin-top: 0 !important;\n        }\n        .wrapper-client {\n          margin: 0;\n          padding: 0;\n          height: 550px;\n          overflow-y: auto;\n          overflow-x: hidden;\n        }\n      "))},Ge=function(){return r.a.createElement("div",{className:"col-12 pt-3 mb-3 footer d-flex justify-content-center"},r.a.createElement("p",{className:"text-white"},"Copyright 2019"),r.a.createElement("style",{jsx:""},"\n        .footer {\n          background-color: #343a40;\n          border-radius: 0 0 7px 7px;\n          height: 60px !important;\n        }\n      "))},Je=a(63),Ve=function(e,t){var a=t.payload;switch(t.type){case"SET_PAGENUM":return Object(d.a)({},e,{pageNum:a});case"SET_ITEMS":return Object(d.a)({},e,{items:a});case"SET_PAGES":return Object(d.a)({},e,{pages:a});case"SET_TOTAL":return Object(d.a)({},e,{total:a});case"SET_START":return Object(d.a)({},e,{start:a});case"SET_END":return Object(d.a)({},e,{end:a});case"SET_REFRESH":return Object(d.a)({},e,{toggle:a});case"SEARCH_ITEMS":return Object(d.a)({},e,{title:a});case"SET_NOT_FOUND":return Object(d.a)({},e,{notFound:a});case"SET_STATUS":return Object(d.a)({},e,{status:a});case"SET_UNVERIFY":return Object(d.a)({},e,{unverify:a});default:return e}},ze=function(e){var t=e.request,a=e.data,r=void 0===a?"data":a,c=e.pages,s=void 0===c?"lastPage":c,l=e.total,o=void 0===l?"total":l,i=e.take,u=void 0===i?15:i,m={items:[],pageNum:1,status:null,unverify:0,pages:0,total:0,take:u,toggle:!1,start:1,end:h.c.pageNumbers,notFound:!1},p=Object(n.useReducer)(Ve,m),b=Object(_.a)(p,2),f=b[0],g=f.toggle,E=f.title,v=f.status,N=f.pageNum,y=Object(L.a)(f,["toggle","title","status","pageNum"]),w=b[1];return Object(n.useEffect)(function(){t(N,u,E,v).then(function(e){w({type:"SET_ITEMS",payload:e[r]}),w({type:"SET_PAGES",payload:e[s]}),w({type:"SET_TOTAL",payload:e[o]}),w({type:"SET_UNVERIFY",payload:e.unverify}),w({type:"SET_NOT_FOUND",payload:!1})}).catch(function(e){var t=e.response;t&&404===t.status&&(w({type:"SET_ITEMS",payload:[]}),w({type:"SET_PAGES",payload:0}),w({type:"SET_PAGENUM",payload:1}),w({type:"SET_NOT_FOUND",payload:!0}))})},[g,E,N,v]),Object(n.useEffect)(function(){w({type:"SET_ITEMS",payload:[]})},[E,N]),{state:Object(d.a)({toggle:g,status:v,pageNum:N,take:u},y),dispatch:w}},He=Object(n.memo)(function(e){var t=ze({request:de,take:h.c.perPage}),a=t.state,n=a.pageNum,c=a.items,s=a.pages,l=a.total,o=Object(L.a)(a,["pageNum","items","pages","total"]),i=t.dispatch,u=function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Je.a)(c),e.prev=1,n=a.filter(function(e){return e.id!==t.id}),i({type:"SET_ITEMS",payload:n}),e.next=6,r=t.id,g.sendJwt(O.jwt()),g.delete("/api/users/".concat(r)).then(function(e){return e.data});case 6:return e.abrupt("return",n.length>0);case 9:return e.prev=9,e.t0=e.catch(1),i({type:"SET_ITEMS",payload:a}),e.abrupt("return",a.length>0);case 13:case"end":return e.stop()}var r},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(V.Provider,{value:{state:Object(d.a)({users:c,pages:s,pageNum:n,total:l},o),onDelete:u,onRefresh:function(){i({type:"SET_REFRESH",payload:function(e){return!e}})},onPageChange:function(e){i({type:"SET_PAGENUM",payload:e})},onSort:function(e){i({type:"SET_ITEMS",payload:D(c,e)})},onSearch:function(e){i({type:"SEARCH_ITEMS",payload:e})},onSetStart:function(e){i({type:"SET_START",payload:e})},onSetEnd:function(e){i({type:"SET_END",payload:e})},onSetStatus:function(e){i({type:"SET_STATUS",payload:e})}}},e.children)}),Ye=function(e){var t=Object(n.useState)({}),a=Object(_.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)(function(){Q().then(function(e){return s(e)})},[]);var l=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(p.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t,a);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,a);case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(z.Provider,{value:{status:c,onAddClient:l,onApproved:o,onCancelled:i,onRetrieved:u,onEnforced:d,onUpdateClient:f,getClient:b}},e.children)},Ze=function(e){var t=e.match.params.id,a=Object(n.useState)({username:"",profile:{firstname:"",middlename:"",lastname:"",branch:{manager:""}}}),c=Object(_.a)(a,2),s=c[0],l=c[1];Object(n.useEffect)(function(){pe(t).then(function(e){l(e)}).catch(function(){return e.history.replace("/not-found")})},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"User Overview")),r.a.createElement(Ae,{isLoaded:""!==s.username,className:"spinner"},r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-4 pr-0"},r.a.createElement("div",{className:"card",style:{width:"auto"}},r.a.createElement("img",{style:{padding:"10%",backgroundColor:"#343a40",height:"303px"},src:"".concat(h.b,"/user.png"),className:"card-img-top",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"".concat(M(s.profile.lastname),", ").concat(M(s.profile.firstname)," ").concat(M(s.profile.middlename))),r.a.createElement("p",{className:"card-subtitle"},M(s.username)),r.a.createElement("span",{className:"mt-4 badge badge-".concat(1===s.status?"success":"danger")},1===s.status?"active":"unverify")))),r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"card",style:{width:"auto"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Personal Details"),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Firstname:"," ",r.a.createElement("span",{className:"text-secondary"},M(s.profile.firstname))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Middlename:"," ",r.a.createElement("span",{className:"text-secondary"},M(s.profile.middlename))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Lastname:"," ",r.a.createElement("span",{className:"text-secondary"},M(s.profile.lastname))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Email:"," ",r.a.createElement("span",{className:"text-secondary"},s.profile.email)))),r.a.createElement("div",{className:"card mt-3",style:{width:"auto"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Employment Details"),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Position:","   ",r.a.createElement("span",{className:"text-secondary"},M(s.position))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Branch:","   ",r.a.createElement("span",{className:"text-secondary"},M(s.profile.branch?s.profile.branch.name:""))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Code Number:","   ",r.a.createElement("span",{className:"text-secondary"},M(s.profile.codeNo))),r.a.createElement("br",null),"manager"!==s.position&&"admin"!==s.position&&r.a.createElement("p",{className:"card-subtitle"},"Under by:","   ",r.a.createElement("span",{className:"text-secondary"},M(s.profile.branch.manager)+" - manager"))))))),r.a.createElement("style",{jsx:""},"\n         \n          .spinner {\n            margin-top: 200px;\n            margin-bottom: 200px;\n          }\n        "))},$e=G(function(e){e.auth;var t=Object(L.a)(e,["auth"]),a=Object(n.useContext)(V).onRefresh,c=t.match.params.id,s=Object(n.useState)({username:"",email:"",firstname:"",middlename:"",lastname:"",manager:"",codeNo:"",position:"",branch:""}),l=Object(_.a)(s,2),i=l[0],u=l[1],b=Object(n.useState)(!1),f=Object(_.a)(b,2),h=f[0],g=f[1];Object(n.useEffect)(function(){g(!1),pe(c).then(function(e){var t=e.profile,a=e.username,n=e.position;u({username:a,email:t.email,firstname:t.firstname,middlename:t.middlename,lastname:t.lastname,codeNo:t.codeNo,manager:t.branch?t.branch.manager:"",branch:t.branch?t.branch.name:"",position:n}),k({id:"sales"===n?1:2,value:n,label:M(n+("manager"!==n?" officer":""))}),I({id:t.branch_id,value:t.branch?t.branch.name:"",label:M(t.branch?t.branch.name:"")}),ne("manager"===n?"/api/branches/available":"/api/branches/taken").then(function(e){w(e),g(!0)})})},[]);var E=[{id:1,label:"Sales Officer",value:"sales"},{id:2,label:"Promo Officer",value:"promo"}],v=Object(n.useState)([]),N=Object(_.a)(v,2),y=N[0],w=N[1],j=Object(n.useState)([]),x=Object(_.a)(j,2),O=x[0],k=x[1],S=Object(n.useState)(null),C=Object(_.a)(S,2),D=C[0],I=C[1],F=Object(n.useState)({}),T=Object(_.a)(F,2),U=T[0],B=T[1],R={username:A.a.string().required().min(6).label("Username"),email:A.a.string().required().label("Email"),firstname:P("Firstname"),middlename:P("Middlename"),lastname:P("Lastname"),position:A.a.string().required().label("Position"),branch:A.a.string().required().label("Branch"),manager:A.a.optional(),codeNo:A.a.number().required().min(8).label("Code Number")},q=function(e){return k(e)},G=function(e){I(e),z()&&e&&ue(e.id).then(function(t){u(Object(d.a)({},i,{manager:t,branch:e.value}))})},J=function(){var e=Object(p.a)(m.a.mark(function e(n,r){var s,l,i,u,d,p,b,f,h,g;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.username,l=r.email,i=r.password,u=r.firstname,d=r.middlename,p=r.lastname,b=r.position,f=r.codeNo,h={username:s,password:i,position:b,profile:{firstname:u,middlename:d,lastname:p,email:l,codeNo:f,branch_id:D?D.id:null}},e.prev=2,e.next=5,oe(c,h);case 5:o.toast.success("Updated!"),B(U),a(),t.history.replace("/users"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),(g=e.t0.response)&&400===g.status&&o.toast.error(g.data.status.errors[0].message);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}(),z=function(){return"manager"!==i.position&&"admin"!==i.position};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Edit User")),r.a.createElement(Ae,{isLoaded:h,className:"spinner"},r.a.createElement(ye,{data:{data:i,setData:u},errors:{errors:U,setErrors:B},onSubmit:J,schema:R},function(e){var a=e.renderInput,n=e.renderSelect,c=e.renderButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col-6 pl-5 pr-3 pt-4"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("position","Position",O,q,E,{isDisabled:"manager"===i.position}),a("codeNo","Code Number"),n("branch","Branch",D,G,y),z()&&a("manager","Manager","manager","",{disabled:!0})),r.a.createElement("div",{className:"col-6 pl-3 pr-5 pt-4"},a("username","Username","text","fa-user"),a("email","Email","email","fa-envelope"),c("Update",null,"Updating...",!0),r.a.createElement("button",{onClick:function(e){e.preventDefault(),t.history.replace("/users")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back"))))})),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n        .row {\n          border-radius: 5px;\n        }\n        .side-content {\n          background-color: #343a40;\n          border-radius: 0 5px 5px 0;\n        }\n        .spinner {\n          margin-top: 200px;\n          margin-bottom: 200px;\n        }\n      "))}),Qe=G(function(e){var t=e.auth,a=Object(L.a)(e,["auth"]),c=Object(n.useState)({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",branch:"",confirmPassword:""}),s=Object(_.a)(c,2),l=s[0],i=s[1],u=Object(n.useContext)(V).onRefresh,b=Object(n.useState)([]),f=Object(_.a)(b,2),h=f[0],g=f[1],E=Object(n.useState)(!1),v=Object(_.a)(E,2),N=v[0],y=v[1],w=function(e){ne("/api/branches/available").then(function(t){e(t),y(t.length>0)})};Object(n.useEffect)(function(){w(g)},[]);var j=Object(n.useState)(null),x=Object(_.a)(j,2),O=x[0],k=x[1],S=Object(n.useState)({}),C=Object(_.a)(S,2),D=C[0],I=C[1],F={username:A.a.string().required().min(6).label("Username"),email:A.a.string().required().label("Email"),password:A.a.string().required().min(6).label("Password"),confirmPassword:A.a.string().required().valid(A.a.ref("password")).options({language:{any:{allowOnly:"not match"}}}).label("Password"),firstname:P("Firstname"),middlename:P("Middlename"),lastname:P("Lastname"),branch:A.a.string().required().label("Branch"),codeNo:A.a.number().required().min(8).label("Code Number")},T=function(){var e=Object(p.a)(m.a.mark(function e(a){var n,r,c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.currentTarget,e.next=3,t.isUsernameTaken(n.value);case 3:return r=e.sent,c=r.isTaken,s=Object(d.a)({},D),c&&(s[n.name]='"'.concat(n.value,'" is taken')),I(s),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(m.a.mark(function e(t,n){var r,c,s,l,d,p,b,f,h,E;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.username,c=n.email,s=n.password,l=n.firstname,d=n.middlename,p=n.lastname,b=n.codeNo,e.next=3,T(t);case 3:if(f=e.sent,!(Object.keys(f).length>0)){e.next=7;break}return I(f),e.abrupt("return");case 7:return h={username:r,password:s,position:"manager",profile:{firstname:l,middlename:d,lastname:p,email:c,codeNo:b,branch_id:O?O.id:0}},e.prev=8,e.next=11,se(h);case 11:o.toast.success("Created!"),i({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",confirmPassword:""}),k(null),w(g),I(f),u(),a.history.replace("/users"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),!(E=e.t0.response)||400!==E.status&&401!==E.status||o.toast.error(E.data.status.errors);case 24:case"end":return e.stop()}},e,this,[[8,20]])}));return function(t,a){return e.apply(this,arguments)}}(),U=function(e){k(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-12 d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-4 border-bottom"},r.a.createElement("h1",{className:"h2"},"Add New Manager")),r.a.createElement(ye,{data:{data:l,setData:i},errors:{errors:D,setErrors:I},onSubmit:M,schema:F},function(e){var t=e.renderInput,n=e.renderSelect,c=e.renderButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-3 mr-0"},r.a.createElement("div",{className:"col-6 pl-3 pr-2 pt-3"},t("firstname","Firstname"),t("middlename","Middlename"),t("lastname","Lastname"),t("codeNo","Code Number"),!N&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"No Available Branch"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return a.history.replace("/branches/new")},className:"btn btn-sm btn-outline-success ml-1"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"BRANCH")),N&&n("branch","Available Branch",O,U,h)),r.a.createElement("div",{className:"col-6 pl-2 pr-3 pt-3"},t("username","Username","text","fa-user",{onBlur:T}),t("email","Email","email","fa-envelope"),t("password","Password","password","fa-key"),t("confirmPassword","Confirm Password","password","fa-key"),c("Add",null,"Saving...",!0))))}),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n        .row {\n          border-radius: 7px;\n        }\n        .side-content {\n          background-color: #343a40;\n          border-radius: 7px 0 0 7px;\n        }\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))}),We=function(e){var t=e.match.params.id,a=Object(n.useState)(!1),c=Object(_.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)({name:"",address:"",contact:""}),u=Object(_.a)(i,2),d=u[0],b=u[1],f=Object(n.useState)({}),h=Object(_.a)(f,2),E=h[0],v=h[1];Object(n.useEffect)(function(){l(!1),function(e){return g.get("/api/branches/show/"+e).then(function(e){return e.data})}(t).then(function(e){var t=e.branch,a=t.name,n=t.address,r=t.contact;b({name:a,address:n,contact:r}),l(!0)})},[]);var N={name:A.a.string().required().label("Name"),address:A.a.optional(),contact:A.a.optional()},y=function(){var a=Object(p.a)(m.a.mark(function a(n,r){var c;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:try{ce(t,r).then(function(){return e.history.replace("/branches")}),o.toast.success("Saved")}catch(n){(c=n.response)&&401===c.status&&o.toast.error(c.data.status.errors)}case 1:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Branch")),r.a.createElement(Ae,{isLoaded:s,className:"spinner"},r.a.createElement("div",{className:"col-6 offset-3"},r.a.createElement(ye,{data:{data:d,setData:b},errors:{errors:E,setErrors:v},onSubmit:y,schema:N},function(e){var t=e.renderInput,a=e.renderButton,n=e.renderTextArea;return r.a.createElement(r.a.Fragment,null,t("name","Name","name",""),n("address","Address","address"),t("contact","Contact","contact"),a("UPDATE",null,"Updating...",!0))}),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/branches")},className:"btn btn-grad-secondary btn-block mt-3",name:"back"},"Back"))),r.a.createElement("style",{jsx:""},"\n        .spinner {\n          margin-top: 200px;\n        }\n      "))},Xe=function(e){var t=e.match.params.id,a=Object(n.useState)(!1),c=Object(_.a)(a,2),s=c[0],l=c[1],i=Object(n.useContext)(z),u=i.getClient,b=i.onUpdateClient,f=(i.status,Object(n.useState)({firstname:"",lastname:"",middlename:"",address:"",contact:"",dateInsured:"",birthdate:"",codeNo:"",userInsured:"",gender:"",mode:"",civil:"",forApproval:!0})),h=Object(_.a)(f,2),g=h[0],E=h[1],v=Object(n.useState)(null),N=Object(_.a)(v,2),y=N[0],w=N[1],j=Object(n.useState)(null),x=Object(_.a)(j,2),O=x[0],k=x[1],S=Object(n.useState)(null),C=Object(_.a)(S,2),D=C[0],I=C[1],T=Object(n.useState)({}),U=Object(_.a)(T,2),B=U[0],R=U[1];Object(n.useEffect)(function(){l(!1),u(t).then(function(e){var t=e.client,a=(t.id,t.coverage,Object(L.a)(t,["id","coverage"]));E(Object(d.a)({},a,{dateInsured:new Date(a.dateInsured).toLocaleDateString(),birthdate:a.birthdate?new Date(a.birthdate).toLocaleDateString():""})),I({id:1,value:a?a.civil:"",label:M(a?a.civil:"")}),w({id:2,value:a?a.gender:"",label:M(a?a.gender:"")}),k({id:3,value:a?a.mode:"",label:M(a?a.mode:"")}),l(!0)})},[]);var q={firstname:P("Firstname"),middlename:P("Middlename"),lastname:P("Lastname"),codeNo:A.a.string().regex(/^[a-zA-Z0-9-]+$/).error(function(e){return e.forEach(function(e){switch(e.type){case"string.regex.base":e.message='"Policy Number" must only have a number and letter with hyphen';break;case"string.min":case"string.max":e.message='"Policy Number" must be equal to 15 characters long'}}),e}).min(15).max(15).label("Policy Number"),contact:A.a.optional(),address:A.a.optional(),expiredDate:A.a.optional(),dateInsured:A.a.string().required().label("Date Insured"),birthdate:A.a.string().required().label("Birthdate"),forApproval:A.a.optional(),userInsured:A.a.optional(),gender:A.a.string().required().label("Gender"),mode:A.a.string().required().label("Mode of Payment"),civil:A.a.string().required().label("Civil Status")},G=function(e){return w(e)},J=function(e){return I(e)},V=function(e){k(e)},H=function(e,t){var a=new Date(e),n=new Date(a);return n.setMonth(a.getMonth()+W(t)),F(n)},Y=function(){var e=Object(p.a)(m.a.mark(function e(a,n){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.codeNo){e.next=3;break}return R({codeNo:'"Policy Number" is not allowed to be empty'}),e.abrupt("return");case 3:return r=H(n.dateInsured,n.mode),c=Object(d.a)({},n,{dateInsured:new Date(n.dateInsured).toISOString(),expiredDate:new Date(r).toISOString(),birthdate:new Date(n.birthdate).toISOString()}),e.prev=5,e.next=8,b(t,c);case 8:o.toast.success("Saved"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[5,11]])}));return function(t,a){return e.apply(this,arguments)}}(),Z=[{id:1,label:"Male",value:"male"},{id:2,label:"Female",value:"female"}],$=[{id:1,value:"single",label:"Single"},{id:2,value:"divorced",label:"Divorced"},{id:3,value:"widowed",label:"Widowed"}],Q=[{id:1,value:"monthly",label:"Monthly"},{id:2,value:"quarterly",label:"Quarterly"},{id:3,value:"semi",label:"Semi-Annually"},{id:4,value:"annually",label:"Annually"}],W=function(e){switch(e){case"monthly":return 1;case"quarterly":return 3;case"semi":return 6;case"annually":return 12;default:return 0}},X=function(e){E(Object(d.a)({},g,{dateInsured:F(e)}))},K=function(e){E(Object(d.a)({},g,{birthdate:F(e)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Edit Client")),r.a.createElement(Ae,{isLoaded:s,className:"spinner"},r.a.createElement(ye,{data:{data:g,setData:E},errors:{errors:B,setErrors:R},onSubmit:Y,schema:q},function(t){var a=t.renderInput,n=t.renderSelect,c=t.renderTextArea,s=t.renderDatePicker,l=t.renderButton;return t.renderCheckbox,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("gender","Gender",y,G,Z),n("civil","Civil Status",D,J,$),s("birthdate","Birthdate",{onChange:K}),a("contact","Contact"),c("address","Address")),r.a.createElement("div",{className:"col-6"},s("dateInsured","Date Insured",{onChange:X}),n("mode","Mode of Payment",O,V,Q),a("codeNo","Policy No"),l("UPDATE",null,"Updating...",!0),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/reports/enforced")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back")))})),r.a.createElement("style",{jsx:""},"\n        .spinner {\n          margin-top: 200px;\n          margin-bottom: 200px;\n        }\n      "))},Ke=function(e){var t=e.menu,a=e.sub,n=Object(L.a)(e,["menu","sub"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,null,r.a.createElement(Ye,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row",style:{backgroundColor:"transparent",minHeight:"800px"}},r.a.createElement(H,null,r.a.createElement("main",{role:"main",className:"dashboard col-md-9 ml-sm-auto col-lg-10 pt-3 px-4 bg-light border border-secondary"},"dashboard"===t&&r.a.createElement(r.a.Fragment,null,"newFs"===a&&r.a.createElement(we,n),"newGPA"===a&&r.a.createElement(je,n),!a&&r.a.createElement(he,n)),"branches"===t&&r.a.createElement(r.a.Fragment,null,"editBranch"===a&&r.a.createElement(We,n),"newBranch"===a&&r.a.createElement(xe,n),!a&&r.a.createElement(De,n)),"users"===t&&r.a.createElement(r.a.Fragment,null,"viewUser"===a&&r.a.createElement(Ze,n),"editUser"===a&&r.a.createElement($e,n),"newUser"===a&&r.a.createElement(Qe,n),!a&&r.a.createElement(Re,n)),"reports"===t&&r.a.createElement(_e,n),"clients"===t&&r.a.createElement(Xe,n))),r.a.createElement(Ge,null))))),r.a.createElement("style",{jsx:""},"\n        .dashboard {\n          border-radius: 0px 7px 0 0;\n        }\n      "))},et=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"logo"}),r.a.createElement("style",{jsx:""},"\n        .logo {\n          width: 100%;\n          height: 100%;\n          border-radius: 5px 0 0 5px;\n          background-color: #343a40;\n        }\n      "))},tt=G(function(e){var t=e.auth,a=Object(L.a)(e,["auth"]),c=Object(n.useState)({username:"",password:""}),s=Object(_.a)(c,2),l=s[0],i=s[1],u=Object(n.useState)({}),d=Object(_.a)(u,2),b=d[0],f=d[1],h=(Object(n.useContext)(V).onRefresh,{username:A.a.string().required().label("Username"),password:A.a.string().required().label("Password")}),g=function(){var e=Object(p.a)(m.a.mark(function e(n,r){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.login(r).then(function(){a.history.replace("/")}).catch(function(e){var t=e.response;t&&401===t.status&&o.toast.error(t.data.status.errors)});case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 mb-3 border border-secondary"},r.a.createElement("div",{className:"col-8 p-0"},r.a.createElement(et,null)),r.a.createElement("div",{className:"col-4 p-3 pt-2"},r.a.createElement("h3",null,"Login"),r.a.createElement("hr",null),r.a.createElement(ye,{data:{data:l,setData:i},errors:{errors:b,setErrors:f},onSubmit:g,schema:h},function(e){var t=e.renderInput,a=e.renderButton;return r.a.createElement(r.a.Fragment,null,t("username","Username","text","fa-user"),t("password","Password","password","fa-key"),a("Login",null,"Logging in...",!0),r.a.createElement("p",{className:"mt-3 text-center"},"or"))}),r.a.createElement("button",{onClick:function(){a.history.replace("/sign-up")},className:"btn btn-grad-secondary btn-block",name:"createAgent"},"Create Agent"))),r.a.createElement("div",{className:"row mb-3 "},r.a.createElement("div",{className:"card text-center border border-secondary"},r.a.createElement("div",{className:"card-header bg-dark text-white"},"Featured"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Special title treatment"),r.a.createElement("p",{className:"card-text"},"It's a broader card with text below as a natural lead-in to extra content. This content is a little longer.")))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Special title treatment"),r.a.createElement("p",{className:"card-text"},"It's a broader card with text below as a natural lead-in to extra content. This content is a little longer.")))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Special title treatment"),r.a.createElement("p",{className:"card-text"},"It's a broader card with text below as a natural lead-in to extra content. This content is a little longer.")))))),r.a.createElement("div",{className:"card-footer text-muted"},"Copyright 2019"))),r.a.createElement("style",{jsx:""},"\n        .row {\n          border-radius: 5px !important;\n          background-color: white;\n        }\n        .col-8;\n      "))}),at=G(function(e){var t=e.auth,a=Object(L.a)(e,["auth"]),c=Object(n.useState)({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",manager:"",confirmPassword:"",position:"",branch:""}),s=Object(_.a)(c,2),l=s[0],i=s[1],u=[{id:1,label:"Sales Officer",value:"sales"},{id:2,label:"Promo Officer",value:"promo"}],b=Object(n.useState)([]),f=Object(_.a)(b,2),h=f[0],g=f[1],E=Object(n.useState)(!1),v=Object(_.a)(E,2),N=v[0],y=v[1],w=function(e){ne("/api/branches/taken").then(function(t){e(t),y(t.length>0)})};Object(n.useEffect)(function(){w(g)},[]);var j=Object(n.useState)(null),x=Object(_.a)(j,2),O=x[0],k=x[1],S=Object(n.useState)(null),C=Object(_.a)(S,2),D=C[0],I=C[1],F=Object(n.useState)({}),T=Object(_.a)(F,2),M=T[0],U=T[1],B={username:A.a.string().required().min(6).label("Username"),email:A.a.string().required().label("Email"),password:A.a.string().required().min(6).label("Password"),confirmPassword:A.a.string().required().valid(A.a.ref("password")).options({language:{any:{allowOnly:"not match"}}}).label("Password"),firstname:P("Firstname"),middlename:P("Middlename"),lastname:P("Lastname"),position:A.a.string().required().label("Position"),branch:A.a.string().required().label("Branch"),codeNo:A.a.number().required().min(8).label("Code Number"),manager:A.a.optional()},R=function(e){return k(e)},q=function(e){I(e),i(Object(d.a)({},l,{manager:""})),e&&ue(e.id).then(function(t){i(Object(d.a)({},l,{manager:t,branch:e.value}))}).catch(function(e){var t=e.response;t&&404===t.status&&o.toast.error(t.data.status.error)})},G=function(){var e=Object(p.a)(m.a.mark(function e(a){var n,r,c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.currentTarget,e.next=3,t.isUsernameTaken(n.value);case 3:return r=e.sent,c=r.isTaken,s=Object(d.a)({},M),c&&(s[n.name]='"'.concat(n.value,'" is taken')),U(s),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(m.a.mark(function e(n,r){var c,s,l,u,d,p,b,f,h,E,v;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.username,s=r.email,l=r.password,u=r.firstname,d=r.middlename,p=r.lastname,b=r.codeNo,f=r.manager,e.next=3,G(n);case 3:if(h=e.sent,!(Object.keys(h).length>0)){e.next=7;break}return U(h),e.abrupt("return");case 7:return E={username:c,password:l,position:O?O.value:"",profile:{firstname:u,middlename:d,lastname:p,email:s,codeNo:b,branch:{manager:f},branch_id:D?D.id:0}},e.prev=8,e.next=11,t.signUp(E);case 11:o.toast.success("Please wait for verification!"),i({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",manager:"",branch:"",position:"",confirmPassword:""}),k(null),I(null),w(g),U(h),a.history.replace("/login"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),!(v=e.t0.response)||400!==v.status&&401!==v.status||o.toast.error(v.data.status.errors);case 24:case"end":return e.stop()}},e,this,[[8,20]])}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{data:{data:l,setData:i},errors:{errors:M,setErrors:U},onSubmit:J,schema:B},function(e){var t=e.renderInput,n=e.renderSelect,c=e.renderButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 mb-3 border border-secondary"},r.a.createElement("div",{className:"side-content col-4"}),r.a.createElement("div",{className:"col-4 pl-3 pr-2 pt-3"},r.a.createElement("div",{className:"col-12  d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-4 border-bottom"},r.a.createElement("h1",{className:"h2"},"Sign Up Agent")),t("firstname","Firstname"),t("middlename","Middlename"),t("lastname","Lastname"),n("position","Position",O,R,u),t("codeNo","Code Number"),!N&&r.a.createElement("label",null,"No Available Branch"),N&&n("branch","Available Branch",D,q,h),t("manager","Manager","manager","",{disabled:!0})),r.a.createElement("div",{className:"col-4 pl-2 pr-3 pt-5 mt-5"},t("username","Username","text","fa-user",{onBlur:G}),t("email","Email","email","fa-envelope"),t("password","Password","password","fa-key"),t("confirmPassword","Confirm Password","password","fa-key"),c("Sign Up",null,"Signing up...",!0),r.a.createElement("button",{onClick:function(e){e.preventDefault(),a.history.replace("/login")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back"),r.a.createElement("p",{className:"text-primary p-2 "},"*Note: Account needs to verify by manager to activate"))))}),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n        .row {\n          background-color: white;\n          border-radius: 7px;\n        }\n        .side-content {\n          background-color: #343a40;\n          border-radius: 7px 0 0 7px;\n        }\n      "))}),nt=function(){return r.a.createElement("h1",null,"Not Found")},rt=G(function(e){var t=e.isAdminOrManager,a=void 0!==t&&t,n=e.isAdmin,c=void 0!==n&&n,s=e.auth,l=(e.path,e.component),o=e.render,i=Object(L.a)(e,["isAdminOrManager","isAdmin","auth","path","component","render"]);return r.a.createElement(R.a,Object.assign({},i,{render:function(e){return s.isValidUser()?a&&!s.isAdminOrManager()?r.a.createElement(q.a,{to:"/not-found"}):c&&!s.isAdmin()?r.a.createElement(q.a,{to:"/not-found"}):l?r.a.createElement(l,e):o(e):r.a.createElement(q.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),ct=G(function(e){var t=e.auth,a=(e.path,e.component),n=e.render,c=Object(L.a)(e,["auth","path","component","render"]);return r.a.createElement(R.a,Object.assign({},c,{render:function(e){return t.isValidUser()?r.a.createElement(q.a,{to:{pathname:"/",state:{from:e.location}}}):a?r.a.createElement(a,e):n(e)}}))}),st=function(e){return r.a.createElement(B.a,null,r.a.createElement(rt,{path:"/dashboard/new-fs",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"dashboard",sub:"newFs"}))}}),r.a.createElement(rt,{path:"/dashboard/new-gpa",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"dashboard",sub:"newGPA"}))}}),r.a.createElement(rt,{path:"/dashboard",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"dashboard"}))}}),r.a.createElement(rt,{path:"/branches/edit/:id",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"branches",sub:"editBranch"}))}}),r.a.createElement(rt,{path:"/branches/new",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"branches",sub:"newBranch"}))}}),r.a.createElement(rt,{path:"/branches",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"branches"}))}}),r.a.createElement(rt,{path:"/agents",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"agents"}))}}),r.a.createElement(rt,{isAdmin:!0,path:"/users/new",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"users",sub:"newUser"}))}}),r.a.createElement(rt,{isAdminOrManager:!0,path:"/users/edit/:id",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"users",sub:"editUser"}))}}),r.a.createElement(rt,{path:"/users/:id",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"users",sub:"viewUser"}))}}),r.a.createElement(rt,{path:"/users",isAdminOrManager:!0,render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"users"}))}}),r.a.createElement(rt,{path:"/reports/:name",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"reports"}))}}),r.a.createElement(rt,{path:"/reports",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"reports"}))}}),r.a.createElement(rt,{path:"/clients/edit/:id",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{menu:"clients"}))}}),r.a.createElement(ct,{path:"/login",render:function(e){return r.a.createElement(tt,e)}}),r.a.createElement(ct,{path:"/sign-up",component:at}),r.a.createElement(R.a,{path:"/not-found",component:nt}),">",r.a.createElement(q.a,{from:"/",exact:!0,to:"/dashboard"}),r.a.createElement(q.a,{to:"/not-found"}))},lt=(a(120),a(122),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(o.ToastContainer,{autoClose:5e3}),r.a.createElement("div",{className:"container"},r.a.createElement(st,null))))});a(124),a(126);s.a.render(r.a.createElement(l.a,null,r.a.createElement(lt,null)),document.getElementById("root"))},13:function(e){e.exports={a:"http://127.0.0.1:3333",b:"http://127.0.0.1:3000",c:{perPage:8,pageNumbers:3},d:{primary:"#a178df",secondary:"#02aab0"}}},64:function(e,t,a){e.exports=a(128)},69:function(e,t,a){}},[[64,2,1]]]);
//# sourceMappingURL=main.cf7f8ec4.chunk.js.map