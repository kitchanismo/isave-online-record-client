(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=a(136),o=(a(69),a(10)),i=a(130),u=a(3),m=a.n(u),d=a(5),p=a(6),b=a(23),f=a.n(b),h=a(13);f.a.interceptors.response.use(function(e){return e},function(e){return function(e){if(e.response&&e.response.data.status&&"ExpiredJwtToken"===e.response.data.status.name)return o.toast.error("Please Logout!"),Promise.reject(e);e.response&&e.response.status>=400&&e.response.status<500||(o.toast.error("An unexpected error occurrred."),console.log(e));return Promise.reject(e)}(e)}),f.a.interceptors.request.use(function(e){return e.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:""}).API_URL||h.a,e});var g={get:f.a.get,post:f.a.post,put:f.a.put,delete:f.a.delete,axios:f.a,sendJwt:function(e){var t=e.token;f.a.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat(t),e})}};var E=a(55),v=a.n(E);function N(e){var t=e.token,a=e.refreshToken;localStorage.setItem("access-token",t),localStorage.setItem("refresh-token",a)}function y(){return(y=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/login",t).then(function(e){N(e.data.jwt)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function w(){return(w=Object(p.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/sign-up",t).then(function(e){return e.data});case 2:return a=e.sent,a.jwt,e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function x(){try{var e=localStorage.getItem("access-token");return Object(d.a)({},v()(e))}catch(t){return null}}var j=function(){return{token:localStorage.getItem("access-token"),refreshToken:localStorage.getItem("refresh-token")}},O={login:function(e){return y.apply(this,arguments)},signUp:function(e){return w.apply(this,arguments)},logout:function(){g.sendJwt(j()),localStorage.removeItem("refresh-token"),localStorage.removeItem("access-token"),g.post("/token/revoke",{refreshToken:j().refreshToken})},getCurrentUser:function(){return x()?Object(d.a)({},x().data):null},isUsernameTaken:function(e){return g.get("/auth/is-taken?username="+e).then(function(e){return e.data})},isEmailTaken:function(e){return g.get("/auth/is-taken?email="+e).then(function(e){return e.data})},jwt:j,isValidUser:function(){return!!x()},isAdmin:function(){return"admin"===x().data.position},isAdminOrManager:function(){var e=x().data.position;return"manager"===e||"admin"===e},isPromo:function(){return"promo"===x().data.position}},k=a(31),S=a.n(k),C=a(4),A=a.n(C);function D(e,t){return S.a.orderBy(e,[t.path],[t.order])}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=e.substring(0,t),n=e.length>t?"...":"";return"".concat(a," ").concat(n)}var P=function(e){return e?new Date(e).toLocaleDateString():null},F=function(e){return A.a.string().required().regex(/^[A-Za-z\s]*$/).error(function(t){return t.forEach(function(t){switch(t.type){case"any.empty":t.message='"'.concat(e,'" is not allowed to be empty');break;case"string.regex.base":t.message='"'.concat(e,'" must NOT have a number or special character')}}),t}).label(e)},T=function(e){return A.a.string().required().regex(/^([0|\+[0-9]{1,5})?([7-9][0-9]{9})$/).error(function(t){return t.forEach(function(t){switch(t.type){case"any.empty":t.message='"'.concat(e,'" is not allowed to be empty');break;case"string.regex.base":t.message='"'.concat(e,'" must be a valid mobile number')}}),t}).label(e)},M=function(e){var t=e.id,a=e.name;return{id:t,label:U(a),value:a}},U=function(e){return S.a.startCase(e)},B=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("h6",{className:"text-white mt-1"},r.a.createElement("span",{style:{color:h.d.secondary}},"COCOLIFE "),": Hybrid Management Information System with SMS Notification"),r.a.createElement("div",{className:"collapse navbar-collapse d-flex justify-content-end",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},O.isValidUser()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item ml-1"},r.a.createElement(i.a,{className:"nav-link active",to:"/users/".concat(O.getCurrentUser().id)},U(O.getCurrentUser().username)+" | "+U(O.getCurrentUser().position))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/login",className:"nav-link",onClick:function(){O.logout()}},"Logout")))))),r.a.createElement("style",{jsx:""},"\n          .navbar {\n            margin-bottom: 20px;\n          }\n          .fa {\n            margin-top: 12px !important;\n          }\n\n          i {\n            cursor: pointer;\n          }\n        ")))},R=a(137),q=a(129),L=a(135),_=a(7),G=a(2),J=function(e){return function(t){return r.a.createElement(e,Object.assign({auth:O},t))}},V=a(103),Y=r.a.createContext({}),H=r.a.createContext({}),z=J(function(e){var t=e.auth,a=Object(_.a)(e,["auth"]),c=Object(n.useState)(!1),s=Object(G.a)(c,2),l=s[0],o=s[1],u=Object(n.useContext)(Y),m=u.state.unverify,d=u.onSetStatus,p=Object(n.useContext)(H).status,b=p.total,f=p.forApproval,g=p.lapsed,E=p.nearExpiration,v=p.due,N=function(e,t,a){return r.a.createElement(V.a,{onClick:function(){return o(!1)},className:"dropdown-item",to:"/reports/".concat(e)},t,r.a.createElement("span",{className:"badge badge-sm badge-secondary ml-2 mt-0"},a||""))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"side-menu col-md-2 d-none d-md-block bg-dark mr-0 pt-1"},r.a.createElement("ul",{className:"nav flex-column mb-2 mt-2 pr-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{onClick:function(){return o(!1)},name:"dashboard",to:"/dashboard",className:"nav-link text-white "},r.a.createElement("span",{className:"fa fa-bookmark mr-2"}),"Dashboard")),t.isAdmin()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.a,{onClick:function(){return o(!1)},name:"branch",to:"/branches",className:"nav-link text-white"},r.a.createElement("span",{className:"fa fa-home mr-2"}),"Branch")),t.isAdminOrManager()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"d-flex ml-3"},r.a.createElement(i.a,{onClick:function(){o(!1),d(null)},to:"/users",className:"nav-link text-white pr-1"},r.a.createElement("span",{className:"fa fa-user mr-2"}),"Users")),r.a.createElement("div",{className:"m-0 p-0"},r.a.createElement(V.a,{"data-toggle":"tooltip",title:"You have ".concat(m," unverify user/s!"),onClick:function(){o(!1),d(0)},to:"/users",className:"nav-link text-white pt-0 pl-0"},r.a.createElement("span",{className:"badge badge-sm badge-danger ml-1"},m||""))))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"d-flex ml-3"},r.a.createElement("a",{onClick:function(){return o(!l)},className:"nav-link text-white pr-1"},r.a.createElement("span",{className:"fa fa-file mr-2"}),"Reports",r.a.createElement("span",{className:"fa fa-angle-".concat(l?"up":"down"," ml-1")}))),r.a.createElement("div",{className:"m-0 p-0"},r.a.createElement("a",{"data-toggle":"tooltip",title:"You have ".concat(b," client reports!"),className:"nav-link text-white pt-1 pl-0"},r.a.createElement("span",{className:"badge badge-sm badge-danger ml-1"},b||"")))),l&&r.a.createElement("div",{className:"dropdown"},N("for-approval","For Approval",f),N("near-expiration","Near Expiration",E),N("due","Due Policy",v),N("lapsed","Lapsed Policy",g),r.a.createElement("hr",{className:"mx-2"}),N("enforced","Enforced Client"),N("gpa","GPA"),N("cancelled","Cancelled Policy"),t.isAdminOrManager()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",{className:"mx-2"}),N("user-archived","User Archived"))))),r.a.createElement("style",{jsx:""},"\n          .nav-item {\n            height: 40px !important;\n          }\n          .badge-danger {\n            margin-top: -5px;\n          }\n          .active {\n            color: ".concat(h.d.secondary," !important;\n            cursor: hand;\n          }\n          .nav-link {\n            cursor: pointer;\n          }\n          a:hover {\n            color: #ddd !important;\n          }\n\n          hr {\n            margin-top: 3;\n            border: 0.5px solid gray;\n          }\n          .side-menu {\n            border-radius: 5px 0 0 0;\n          }\n          .dropdown {\n            margin-left: 30px;\n            padding-right: 0 !important;\n            background-color: white;\n            z-index: 2 !important;\n            border-radius: 3px !important;\n            padding-top: 10px;\n\n            padding-bottom: 10px;\n            border: 1px solid #343a40;\n          }\n          .dropdown-item {\n            font-size: 14px;\n          }\n          .dropdown-item:hover {\n            color: gray !important;\n          }\n        "))),a.children)}),W=a(41),$=a.n(W);function Z(e){return g.post("/api/clients",e).then(function(e){return e.data})}function Q(){return g.sendJwt(O.jwt()),g.get("/api/clients/status").then(function(e){return e.data})}function X(e){return g.sendJwt(O.jwt()),g.get("/api/clients/show/"+e).then(function(e){return e.data})}function K(e,t){return g.sendJwt(O.jwt()),g.put("/api/clients/approved/"+e,{codeNo:t}).then(function(e){return e})}function ee(e,t){return g.sendJwt(O.jwt()),g.put("/api/clients/edit/"+e,t).then(function(e){return e})}function te(e){return g.sendJwt(O.jwt()),g.put("/api/clients/enforced/"+e.id,Object(d.a)({},e)).then(function(e){return e})}function ae(e){return g.sendJwt(O.jwt()),g.put("/api/clients/cancelled/"+e,{}).then(function(e){return e})}function ne(e){return g.sendJwt(O.jwt()),g.put("/api/clients/retrieved/"+e,{}).then(function(e){return e})}function re(){return ce.apply(this,arguments)}function ce(){return(ce=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.sendJwt(O.jwt()),e.next=3,g.get("/api/users/promo-officers").then(function(e){return e.data}).then(function(e){return e.users.map(function(e){var t=e.profile,a=t.firstname,n=t.lastname,r=t.middlename;return{id:e.id,label:U("".concat(a," ").concat(r," ").concat(n)),value:"".concat(a," ").concat(r," ").concat(n)}})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function se(e){return le.apply(this,arguments)}function le(){return(le=Object(p.a)(m.a.mark(function e(t){var a,n=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.next=3,g.get(t).then(function(e){return e.data}).then(function(e){var t=e.branches;return a?t:t.map(function(e){return M(e)})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function oe(e,t){return g.put("/api/branches/edit/"+e,t).then(function(e){return e.data})}function ie(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.sendJwt(O.jwt()),e.next=3,g.post("/api/users",t).then(function(e){return e.data});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function me(e,t){return de.apply(this,arguments)}function de(){return(de=Object(p.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.sendJwt(O.jwt()),e.next=3,g.put("/api/users/"+t,a).then(function(e){return e.data});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function pe(e){return be.apply(this,arguments)}function be(){return(be=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/api/branches/managers/".concat(t)).then(function(e){return e.data.fullname});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function fe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;return g.sendJwt(O.jwt()),g.get("/api/users/page/".concat(e,"?limit=").concat(t,"&status=").concat(n,"&search=").concat(a)).then(function(e){return e.data.data})}function he(e){return g.sendJwt(O.jwt()),g.get("/api/users/".concat(e)).then(function(e){return e.data.user})}var ge=function(e){var t=Object(n.useState)([]),a=Object(G.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),l=Object(G.a)(s,2),o=l[0],i=l[1],u=Object(n.useState)(!1),m=Object(G.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)(function(){var t;c([]),p(!1),"user-archived"===e?(g.sendJwt(O.jwt()),g.get("/api/users/archived").then(function(e){return e.data.archived})).then(function(e){c(e),p(!0)}):(t=e,g.sendJwt(O.jwt()),g.get("/api/clients/"+t).then(function(e){return e.data.clients})).then(function(e){c(e),p(!0)})},[e,o]),{reports:r,setRefresh:i,setReports:c,isLoaded:d}},Ee=function(e){var t=e.width,a=void 0===t?40:t,n=e.heigth,c=void 0===n?40:n,s=e.color,l=void 0===s?"#03995b":s,o=e.duration,i=void 0===o?"640ms":o,u=e.isLoaded,m=void 0!==u&&u,d=e.className,p=Object(_.a)(e,["width","heigth","color","duration","isLoaded","className"]);return m?p.children:r.a.createElement("div",{className:"d-flex justify-content-center ".concat(d)},r.a.createElement("svg",{version:"1.0",width:"".concat(a,"px"),height:"".concat(c,"px"),viewBox:"0 0 128 128"},r.a.createElement("g",null,r.a.createElement("circle",{cx:"16",cy:"64",r:"16",fill:l,fillOpacity:"1"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"14.344",fill:l,fillOpacity:"1",transform:"rotate(45 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"12.531",fill:l,fillOpacity:"1",transform:"rotate(90 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"10.75",fill:l,fillOpacity:"1",transform:"rotate(135 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"10.063",fill:l,fillOpacity:"1",transform:"rotate(180 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"8.063",fill:l,fillOpacity:"1",transform:"rotate(225 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"6.438",fill:l,fillOpacity:"1",transform:"rotate(270 64 64)"}),r.a.createElement("circle",{cx:"16",cy:"64",r:"5.375",fill:l,fillOpacity:"1",transform:"rotate(315 64 64)"}),r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",values:"0 64 64;315 64 64;270 64 64;225 64 64;180 64 64;135 64 64;90 64 64;45 64 64",calcMode:"discrete",dur:i,repeatCount:"indefinite"}))))},ve=function(e){var t=Object(n.useState)([{name:"series-1",data:[]}]),a=Object(G.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)({theme:{palette:"palette5"},chart:{id:"basic-bar"},xaxis:{categories:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},title:{text:e,align:"center",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"20px",color:h.d.secondary}},grid:{show:!0,borderColor:"black",strokeDashArray:1,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:0,bottom:0,left:0}}});return{options:Object(G.a)(s,1)[0],series:r,setSeries:c}},Ne=function(e){var t=ge("near-expiration"),a=t.reports,c=void 0===a?[]:a,s=t.isLoaded,l=Object(n.useState)(!1),o=Object(G.a)(l,2),i=o[0],u=o[1],m=ve("2019 FSP Statistic"),d=m.options,p=m.series,b=m.setSeries,f=ve("2019 GPA Statistic"),E=f.options,v=f.series,N=f.setSeries;Object(n.useEffect)(function(){var e;u(!1),(g.sendJwt(O.jwt()),g.post("/api/clients/statistic/",{year:e}).then(function(e){return e.data.statistic})).then(function(e){b([{name:"series-1",data:e.fsp}]),N([{name:"series-1",data:e.gpa}]),u(!0)})},[]);return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{isLoaded:s&&i,className:"spinner"},r.a.createElement("div",{className:"row d-flex justify-content-around mx-2"},r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"header-list pb-0 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-bold"},"Client Near Expiration"),r.a.createElement("span",{className:"badge badge-danger badge-pill"},c.length?c.length:"")),r.a.createElement("li",{className:"header-list py-1 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-light"},"Name"),r.a.createElement("span",{className:"font-weight-light"},"Due Date"),r.a.createElement("span",{className:"font-weight-light"},"Notify")),r.a.createElement("div",{className:"wrapper-list"},c.map(function(e){return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"".concat(e.lastname,", ").concat(e.firstname," ").concat(e.middlename),r.a.createElement("span",{className:"badge badge-secondary badge-pill"},P(e.expiredDate)),1===e.isNear&&r.a.createElement("span",{className:"fa fa-check text-info"}),0===e.isNear&&r.a.createElement("span",{className:"fa fa-close text-danger"}))}),0===c.length&&s&&r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"No record/s found!"))),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"header-list pb-0 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-bold"},"SPIF")),r.a.createElement("li",{className:"header-list py-1 list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("span",{className:"font-weight-light"},"Tab"),r.a.createElement("span",{className:"font-weight-light"},"Tab")),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"No record/s found!"))),r.a.createElement("div",{className:"row d-flex mt-4 justify-content-around"},r.a.createElement($.a,{key:"Sales",type:"line",options:d,series:p,width:"400px"}),r.a.createElement($.a,{key:"FSF",type:"line",options:E,series:v,width:"400px"}))),r.a.createElement("style",{jsx:""},"\n        .list-group {\n          width: 400px !important;\n        }\n\n        .header-list {\n          background-color: ".concat(h.d.secondary,";\n          border-color: ").concat(h.d.secondary,";\n          color: white;\n        }\n\n        .spinner {\n          margin-top: 110px;\n        }\n\n        .fa-check,\n        .fa-close {\n          margin-top: 0 !important;\n        }\n\n        .wrapper-list {\n          margin: 0;\n          padding: 0;\n          height: 180px;\n          overflow-x: hidden;\n          overflow-y: auto;\n        }\n      "))))},ye=J(function(e){var t=e.auth,a=Object(_.a)(e,["auth"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Dashboard"),!t.isPromo()&&!t.isAdmin()&&r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return a.history.replace("/dashboard/new-fs")},className:"btn btn-sm btn-grad-primary"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"FUTURE SAVINGS"),r.a.createElement("button",{onClick:function(){return a.history.replace("/dashboard/new-gpa")},className:"btn btn-sm btn-grad-primary  ml-2"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"GPA FORM"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 mt-3"},r.a.createElement(Ne,null))),r.a.createElement("style",{jsx:""},"\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))}),we=a(29),xe=function(e){var t=e.name,a=e.label,n=e.error,c=e.icon,s=void 0===c?"":c,l=Object(_.a)(e,["name","label","error","icon"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},s&&r.a.createElement("div",{className:"input-group-text p-0"},r.a.createElement("span",{className:"fa ".concat(s," p-0 m-2")}))),r.a.createElement("input",Object.assign({},l,{name:t,id:t,className:"form-control"}))),n&&r.a.createElement("p",{className:"error-message text-danger p-1"},n),r.a.createElement("style",{jsx:""},"\n        .error-message {\n          font-size: 13px;\n        }\n      "))},je=a(62),Oe=a(35),ke=(a(111),function(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),c=a[0],s=a[1],l=e.data||{},o=l.data,i=l.setData,u=e.errors||{},m=u.errors,p=u.setErrors,b=Object(d.a)({},e.schema),f=function(){var e=A.a.validate(o,b,{abortEarly:!1}).error;if(!e)return null;var t={},a=!0,n=!1,r=void 0;try{for(var c,s=e.details[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var l=c.value;t[l.path[0]]=l.message}}catch(i){n=!0,r=i}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return t},h=function(e){var t=e.currentTarget,a=Object(d.a)({},m),n=function(e){var t=e.name,a=e.value,n=Object(we.a)({},t,a),r=Object(we.a)({},t,b[t]),c=A.a.validate(n,r).error;return c?c.details[0].message:null}(t);n?a[t.name]=n:delete a[t.name];var r=g(t,a,o.password),c=Object(d.a)({},o);c[t.name]=t.value,i(c),p(r)},g=function(e,t,a){var n=Object(d.a)({},t);return"confirmPassword"===e.name&&e.value===a&&delete n[e.name],n};return r.a.createElement("form",{onSubmit:function(t){return function(e,t){e.preventDefault();var a=f();p(a||{}),a||(s(!0),t(e,o).then(function(){return s(!1)}).catch(function(){return s(!0)}))}(t,e.onSubmit)}},e.children({renderButton:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.a.createElement("button",{className:"btn btn-grad-primary mt-3 ".concat(n?"btn-block":"")},r.a.createElement("span",{className:"".concat(t," mr-1")}),c?a:e)},renderInput:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return r.a.createElement(xe,Object.assign({type:a,name:e,value:o[e],label:t,onChange:h,error:m[e],icon:n},c))},renderTextArea:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e},t),r.a.createElement("textarea",{value:o[e],onChange:h,className:"form-control",id:e,rows:a,name:e}),m[e]&&r.a.createElement("div",{className:"alert p-2 mt-2 alert-danger"},m[e]))},renderDatePicker:function(e,t,a){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e},t),r.a.createElement("div",null,r.a.createElement(je.a,Object.assign({peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",placeholderText:"Select a date",className:"form-control",value:o[e],onBlur:function(){var t=Object(d.a)({},m);delete t[e],p(t)}},a))),m[e]&&r.a.createElement("p",{className:"error-message text-danger p-1"},m[e]))},renderSelect:function(e,t,a,n,c,s){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e},t),r.a.createElement(Oe.a,Object.assign({},s,{isSearchable:!0,isClearable:!0,value:a,onBlur:function(){var t=Object(d.a)({},m);delete t[e],p(t)},onChange:function(t){i(Object(d.a)({},o,Object(we.a)({},e,t?t.value:""))),n(t)},options:c})),m[e]&&r.a.createElement("p",{className:"error-message text-danger p-1"},m[e]))},renderCheckbox:function(e,t,a){return r.a.createElement("div",{className:"form-check"},r.a.createElement("input",Object.assign({type:"checkbox",checked:o[e],name:e,className:"form-check-input",id:e},a)),r.a.createElement("label",{className:"form-check-label",htmlFor:e},t))}}))}),Se=function(e){var t=Object(n.useContext)(H),a=t.onAddClient,c=(t.status,Object(n.useState)([])),s=Object(G.a)(c,2),l=s[0],i=s[1];Object(n.useEffect)(function(){re().then(function(e){i(e)})},[]);var u=Object(n.useState)({firstname:"",lastname:"",middlename:"",address:"",contact:"",birthdate:"",promo:"",dateInsured:P(Date.now()),expiredDate:"",codeNo:"",userInsured:"",gender:"",mode:"",civil:"",forApproval:!0}),b=Object(G.a)(u,2),f=b[0],h=b[1],g=Object(n.useState)(null),E=Object(G.a)(g,2),v=E[0],N=E[1],y=Object(n.useState)(null),w=Object(G.a)(y,2),x=w[0],j=w[1],k=Object(n.useState)(null),S=Object(G.a)(k,2),C=S[0],D=S[1],I=Object(n.useState)(null),M=Object(G.a)(I,2),U=M[0],B=M[1],R=Object(n.useState)({}),q=Object(G.a)(R,2),L=q[0],_=q[1],J={firstname:F("Firstname"),middlename:F("Middlename"),lastname:F("Lastname"),codeNo:f.forApproval?A.a.optional():A.a.string().regex(/^[a-zA-Z0-9-]+$/).error(function(e){return e.forEach(function(e){switch(e.type){case"string.regex.base":e.message='"Policy Number" must only have a number and letter with hyphen';break;case"string.min":case"string.max":e.message='"Policy Number" must be equal to 15 characters long'}}),e}).min(15).max(15).label("Policy Number"),contact:T("Mobile Contact"),address:A.a.optional(),expiredDate:A.a.optional(),birthdate:A.a.string().required().label("Birthdate"),dateInsured:A.a.string().required().label("Date Insured"),forApproval:A.a.optional(),userInsured:A.a.optional(),gender:A.a.string().required().label("Gender"),mode:A.a.string().required().label("Mode of Payment"),civil:A.a.string().required().label("Civil Status"),promo:A.a.string().required().label("Promo Officer")},V=function(e){return j(e)},Y=function(e){return B(e)},z=function(e){return N(e)},W=function(e){if(D(e),e){var t=$(f.dateInsured,e.value);h(Object(d.a)({},f,{mode:e.value,expiredDate:t}))}},$=function(e,t){var a=new Date(e),n=new Date(a);return n.setMonth(a.getMonth()+ee(t)),P(n)},Z=function(){var e=Object(p.a)(m.a.mark(function e(t,n){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.forApproval||""!==n.codeNo){e.next=3;break}return _({codeNo:'"Policy Number" is not allowed to be empty'}),e.abrupt("return");case 3:return r=$(n.dateInsured,C.value),c=Object(d.a)({},n,{mode:C?C.value:"",promo:v.id,dateInsured:new Date(n.dateInsured).toISOString(),expiredDate:new Date(r).toISOString(),userInsured:O.getCurrentUser().id}),e.prev=5,e.next=8,a(c);case 8:o.toast.success("Saved"),h({firstname:"",lastname:"",middlename:"",address:"",contact:"",dateInsured:"",birthdate:"",codeNo:"",userInsured:"",promo:"",gender:"",mode:"",expiredDate:"",civil:"",forApproval:!0}),j(null),D(null),B(null),N(null),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:case"end":return e.stop()}},e,this,[[5,16]])}));return function(t,a){return e.apply(this,arguments)}}(),Q=[{id:1,label:"Male",value:"male"},{id:2,label:"Female",value:"female"}],X=[{id:1,value:"single",label:"Single"},{id:2,value:"divorced",label:"Divorced"},{id:3,value:"widowed",label:"Widowed"}],K=[{id:1,value:"monthly",label:"Monthly"},{id:2,value:"quarterly",label:"Quarterly"},{id:3,value:"semi",label:"Semi-Annually"},{id:4,value:"annually",label:"Annually"}],ee=function(e){switch(e){case"monthly":return 1;case"quarterly":return 3;case"semi":return 6;case"annually":return 12;default:return 0}},te=function(e){var t=C?$(e,C.value):"";h(Object(d.a)({},f,{expiredDate:t,dateInsured:P(e)}))},ae=function(e){h(Object(d.a)({},f,{birthdate:P(e)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Future Savings")),r.a.createElement(ke,{data:{data:f,setData:h},errors:{errors:L,setErrors:_},onSubmit:Z,schema:J},function(t){var a=t.renderInput,n=t.renderSelect,c=t.renderTextArea,s=t.renderDatePicker,o=t.renderButton,i=t.renderCheckbox;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("gender","Gender",x,V,Q),n("civil","Civil Status",U,Y,X),s("birthdate","Birthdate",{onChange:ae}),a("contact","Mobile Contact"),c("address","Address")),r.a.createElement("div",{className:"col-6"},s("dateInsured","Date Insured",{onChange:te}),n("mode","Mode of Payment",C,W,K),a("expiredDate","Due Date","text","",{disabled:!0}),n("promo","Promo Officer",v,z,l),!f.forApproval&&a("codeNo","Policy No"),i("forApproval","For Approval",{onChange:function(e){return h(Object(d.a)({},f,{codeNo:"",forApproval:e.target.checked}))}}),o("Save",null,"Saving...",!0),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/dashboard")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back")))}))},Ce=function(e){var t=Object(n.useContext)(H).onAddClient,a=Object(n.useState)({firstname:"",lastname:"",middlename:"",birthdate:"",dateInsured:P(Date.now()),address:"",contact:"",codeNo:"",gender:"",coverage:0}),c=Object(G.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(null),u=Object(G.a)(i,2),b=u[0],f=u[1],h=Object(n.useState)(null),g=Object(G.a)(h,2),E=g[0],v=g[1],N=Object(n.useState)({}),y=Object(G.a)(N,2),w=y[0],x=y[1],j={firstname:F("Firstname"),middlename:F("Middlename"),lastname:F("Lastname"),dateInsured:A.a.string().required().label("Date Insured"),birthdate:A.a.string().required().label("Birthdate"),gender:A.a.string().required().label("Gender"),coverage:A.a.number().required().label("Coverage"),contact:T("Mobile Number"),address:A.a.optional(),codeNo:A.a.number().required().label("Code Number")},O=function(e){return f(e)},k=function(e){return v(e)},S=function(e){l(Object(d.a)({},s,{dateInsured:P(e)}))},C=function(){var e=Object(p.a)(m.a.mark(function e(a,n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(Object(d.a)({},n,{isGPA:!0,dateInsured:new Date(n.dateInsured).toISOString()}));case 3:o.toast.success("Saved"),l({firstname:"",lastname:"",middlename:"",address:"",contact:"",dateInsured:"",codeNo:"",gender:"",birthdate:"",coverage:0}),v(null),f(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}(),D=[{id:1,label:"Male",value:"smale"},{id:2,label:"Female",value:"female"}],I=[{id:1,label:"1 Year",value:1},{id:2,label:"2 Years",value:2},{id:3,label:"3 Years",value:3}],M=function(e){l(Object(d.a)({},s,{birthdate:P(e)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"GPA Form")),r.a.createElement(ke,{data:{data:s,setData:l},errors:{errors:w,setErrors:x},onSubmit:C,schema:j},function(t){var a=t.renderInput,n=t.renderSelect,c=t.renderTextArea,s=t.renderDatePicker;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("gender","Gender",E,k,D),s("birthdate","Birthdate",{onChange:M}),a("contact","Contact"),c("address","Address")),r.a.createElement("div",{className:"col-6"},s("dateInsured","Date Insured",{onChange:S}),a("codeNo","GPA No."),n("coverage","Coverage",b,O,I),r.a.createElement("button",{className:"btn btn-grad-primary btn-block",name:"back"},"Save"),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/dashboard")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back")))}))},Ae=function(e){e.onRefresh;var t=Object(_.a)(e,["onRefresh"]),a=Object(n.useState)({name:"",address:"",contact:""}),c=Object(G.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)({}),u=Object(G.a)(i,2),b=u[0],f=u[1],h={name:A.a.string().required().label("Name"),address:A.a.optional(),contact:A.a.optional()},E=function(){var e=Object(p.a)(m.a.mark(function e(a,n){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(a);case 2:if(r=e.sent,!(Object.keys(r).length>0)){e.next=6;break}return f(r),e.abrupt("return");case 6:try{(s=n,g.post("/api/branches",s).then(function(e){return e.data})).then(function(){return t.history.replace("/branches")}),o.toast.success("Saved")}catch(l){(c=l.response)&&401===c.status&&o.toast.error(c.data.status.errors)}case 7:case"end":return e.stop()}var s},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n,r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget,e.next=3,s=a.value,g.get("/api/branches/is-taken?name="+s).then(function(e){return e.data});case 3:return n=e.sent,r=n.isTaken,c=Object(d.a)({},b),r&&(c[a.name]='"'.concat(a.value,'" is taken')),f(c),e.abrupt("return",c);case 9:case"end":return e.stop()}var s},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Branch")),r.a.createElement("div",{className:"col-6 offset-3"},r.a.createElement(ke,{data:{data:s,setData:l},errors:{errors:b,setErrors:f},onSubmit:E,schema:h},function(e){var t=e.renderInput,a=e.renderButton,n=e.renderTextArea;return r.a.createElement(r.a.Fragment,null,t("name","Name","name",""),n("address","Address","address"),t("contact","Contact","contact"),a("ADD",null,"Adding...",!0))}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),t.history.replace("/branches")},className:"btn btn-grad-secondary btn-block mt-3",name:"back"},"Back")),r.a.createElement("style",{jsx:""},"\n        .spinner {\n          margin-top: 200px;\n        }\n      "))},De=function(e){return r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,e.columns.map(function(t,a){return r.a.createElement("th",{className:"clickable",key:a,onClick:function(){return function(t){var a=Object(d.a)({},e.sortColumn);a.path===t?a.order="asc"===a.order?"desc":"asc":(a.path=t,a.order="asc"),e.onSort(a)}(t.path)}},t.label," ",function(t){var a=e.sortColumn;return t.path?t.path!==a.path?null:"asc"===a.order?r.a.createElement("i",{className:"fa fa-sort-asc"}):r.a.createElement("i",{className:"fa fa-sort-desc"}):null}(t))})),r.a.createElement("style",{jsx:""},"\n        .thead-dark,\n        th {\n          color: #fff;\n          background: #02aab0 !important;\n          border-color: #02aab0 !important;\n        }\n      "))},Ie=function(e){var t=e.data,a=e.columns;return r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},a.map(function(t,a){return r.a.createElement("td",{className:"text-center",key:a},function(e,t){return t.content?t.content(e):S.a.get(e,t.path)}(e,t))}))}))},Pe=function(e){var t=e.columns,a=e.sortColumn,n=e.onSort,c=e.data;return r.a.createElement("table",{className:"table table-bordered table-hover "},r.a.createElement(De,{columns:t,sortColumn:a,onSort:n}),r.a.createElement(Ie,{columns:t,data:c}))},Fe=function(e){var t=e.branches,a=e.setBranches,c=(Object(_.a)(e,["branches","setBranches"]),Object(n.useState)({path:"name",order:"asc"})),s=Object(G.a)(c,2),l=s[0],o=s[1],i=[{path:"id",label:"#"},{path:"name",label:"Name"},{path:"manager",label:"Manager"},{path:"address",label:"Address"},{path:"contact",label:"Contact"},{key:"actions",label:"Action",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(V.a,{to:"/branches/edit/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-warning ml-1"},"EDIT"))))}}];return r.a.createElement(Pe,{columns:i,data:t.map(function(e){return e.address=I(e.address,15),e.manager=null!==e.manager?I(e.manager,10):e.manager,e}),sortColumn:l,onSort:function(e){o(e),a(D(t,e))}})},Te=function(e){var t=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(G.a)(c,2),l=s[0],o=s[1],i=Object(n.useState)(!1),u=Object(G.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)(function(){d(!1),se("/api/branches",!0).then(function(e){d(!0),r(e)})},[l]),{branches:a,setRefresh:o,setBranches:r,isLoaded:m}}(),a=t.branches,c=(t.setRefresh,t.setBranches),s=t.isLoaded;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Branch"),r.a.createElement("button",{onClick:function(){return e.history.replace("/branches/new")},className:"btn btn-sm btn-grad-primary ml-1"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"BRANCH")),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-12 side-content pt-4"},r.a.createElement(Ee,{isLoaded:s,className:"spinner"},r.a.createElement(Fe,{branches:a,setBranches:c})))),r.a.createElement("style",{jsx:""},"\n        .side-content {\n          border-radius: 5px 0 0 5px;\n        }\n        .spinner {\n          margin-top: 200px;\n        }\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))},Me=function(e){var t=h.c.pageNumbers,a=Object(n.useContext)(Y),c=a.state,s=c.pageNum,l=c.pages,o=c.start,i=c.end,u=a.onPageChange,m=a.onSetStart,d=a.onSetEnd;Object(n.useEffect)(function(){i>l&&1!==o&&(p(),b())},[s]);var p=function(){return m(o-1)},b=function(){return d(i-1)},f=function(e){s!==e&&u(e)},g=function(e){f(e+1),i!==l&&(m(o+1),d(i+1))},E=function(){return l>t},v=function(){return 1===s?"disabled":""},N=function(){return l===s?"disabled":""};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col d-flex justify-content-start px-0"},r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},E()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"page-item ".concat(v())},r.a.createElement("button",{className:"page-link",onClick:function(){1!==s&&(f(1),m(1),d(t))}},"first")),r.a.createElement("li",{className:"page-item ".concat(v())},r.a.createElement("button",{className:"page-link","aria-label":"Previous",onClick:function(){return f(s-1),void(1!==o&&(p(),b()))}},"\xab"))),l>1&&function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a}(o,l<t?l:i).map(function(e){return r.a.createElement("li",{key:e,className:s===e?"page-item active":"page-item"},r.a.createElement("button",{className:"page-link",onClick:function(){return f(e)}},e))}),E()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"page-item ".concat(N())},r.a.createElement("button",{className:"page-link","aria-label":"Next",onClick:function(){return g(s)}},"\xbb")),r.a.createElement("li",{className:"page-item ".concat(N())},r.a.createElement("button",{className:"page-link",onClick:function(){f(l),m(l-(t-1)),d(l)}},"last")))))),r.a.createElement("div",{className:"pages px-0 col d-flex justify-content-end"},r.a.createElement("p",{className:"page-of"},"".concat(s," of ").concat(l))),r.a.createElement("style",{jsx:""},"\n            .pages {\n              text-align: right;\n            }\n            .page-of {\n              margin-top: 10px;\n            }\n            .page-item.active .page-link {\n              z-index: 1;\n              color: #fff;\n              background-color: ".concat(h.d.secondary,";\n              border-color: ").concat(h.d.secondary,";\n            }\n\n            .page-link {\n              color: ").concat(h.d.secondary,";\n            }\n            .page-link:hover {\n              color: ").concat(h.d.secondary,";\n            }\n          "))))},Ue=a(134),Be=a(131),Re=a(132),qe=a(133),Le=function(e){var t=e.label,a=e.primary,n=e.secondary,c=e.modal,s=e.toggle,l=e.className,o=e.title,i=Object(_.a)(e,["label","primary","secondary","modal","toggle","className","title"]);return r.a.createElement(Ue.a,Object.assign({isOpen:c,toggle:s,className:"".concat(l)},i),r.a.createElement(Be.a,{toggle:s},o),r.a.createElement(Re.a,null,t),r.a.createElement(qe.a,null,r.a.createElement("button",{className:"btn btn-".concat(a&&a.type||"primary"," btn-sm"),name:"primary",onClick:s},a&&a.label||"Ok")," ",r.a.createElement("button",{className:"btn btn-".concat(n&&n.type||"secondary"," btn-sm"),name:"secondary",onClick:s},n&&n.label||"Cancel")))},_e=function(e){var t=e.handleSearch,a=e.placeholder,c=void 0===a?"Search here":a,s=Object(n.useState)(""),l=Object(G.a)(s,2),o=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return t({e:e,search:o})}},r.a.createElement("input",{type:"text",name:o,value:o,onChange:function(e){i(e.target.value)},className:"form-control",placeholder:c}),r.a.createElement("button",{className:"btn btn-grad-primary ml-2"},"SEARCH"),r.a.createElement("button",{onClick:function(){return i("")},className:"btn btn-grad-secondary ml-2"},"REFRESH")),r.a.createElement("style",{jsx:""},"\n        form {\n          display: flex;\n        }\n        .btn-search {\n          width: 15%;\n        }\n      "))},Ge=J(function(e){var t=e.auth,a=Object(_.a)(e,["auth"]),c=Object(n.useContext)(Y),s=c.state,l=s.users,i=s.pageNum,u=s.start,d=s.end,b=s.notFound,f=c.onDelete,E=c.onRefresh,v=c.onPageChange,N=c.onSort,y=c.onSearch,w=c.onSetStart,x=c.onSetEnd,j=c.onSetStatus,k=Object(n.useState)({}),S=Object(G.a)(k,2),C=S[0],A=S[1],D=Object(n.useState)({path:"name",order:"asc"}),I=Object(G.a)(D,2),P=I[0],F=I[1],T=[{path:"id",label:"#"},{path:"username",label:"Username"},{path:"profile.lastname",key:"fullname",label:"Fullname",content:function(e){return"".concat(e.profile.firstname,", ").concat(e.profile.middlename," ").concat(e.profile.lastname)}},{path:"position",label:"Position"},{path:"profile.branch.name",label:"Branch"},{path:"profile.codeNo",key:"codeNo",label:"Code #",content:function(e){return e.profile.codeNo}},{path:"status",key:"status",label:"Status",content:function(e){return r.a.createElement("span",{onClick:function(){var t=Object(p.a)(m.a.mark(function t(a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return A(e),t.next=3,L(a);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),className:"badge badge-".concat(1===e.status?"success":"danger")},1===e.status?"active":"inactive")}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement(V.a,{to:"/users/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary ml-1"},"VIEW")),r.a.createElement(V.a,{to:"/users/edit/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-warning ml-1"},"EDIT")),r.a.createElement("button",{onClick:function(t){A(e),$(t).then(function(e){return e})},className:"btn btn-sm btn-outline-danger ml-1",name:"delete"},"ARCHIVE")))}}],M=Object(n.useState)(!1),B=Object(G.a)(M,2),R=B[0],q=B[1],L=function(){var e=Object(p.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,q(function(e){return!e}),!a||"primary"!==a.name){e.next=7;break}return e.next=5,n=C.id,g.sendJwt(O.jwt()),g.get("/api/users/status/".concat(n)).then(function(e){return e.data.data});case 5:A({}),E();case 7:case"end":return e.stop()}var n},e,this)}));return function(t){return e.apply(this,arguments)}}(),J=Object(n.useState)(!1),H=Object(G.a)(J,2),z=H[0],W=H[1],$=function(){var e=Object(p.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,W(function(e){return!e}),!a||"primary"!==a.name){e.next=8;break}return e.next=5,Z(C);case 5:"manager"===C.position&&o.toast.info("".concat(U(C.profile.branch.name)," branch is now available")),A({}),E();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:if(e.sent){e.next=7;break}return v(i-1),u>1&&w(u-1),x(d-1),e.abrupt("return");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(m.a.mark(function e(t){var n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.e,r=t.search,n.preventDefault(),a.history.replace("/users"),j(null),w(1),x(h.c.pageNumbers),v(1),y(r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le,{title:"Cocolife",modal:R,toggle:L,label:"".concat(0===C.status?"Activate":"Deactivate"," ").concat(C.username,"?"),primary:{type:"primary",label:"CONFIRM"}}),r.a.createElement(Le,{title:"Cocolife",modal:z,toggle:$,label:"Archive ".concat(C.username,"?"),primary:{type:"danger",label:"ARCHIVE"}}),r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Users Management"),t.isAdmin()&&r.a.createElement("button",{onClick:function(){return a.history.replace("/users/new")},className:"btn btn-sm btn-grad-primary ml-1"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"MANAGER")),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"mb-3"},r.a.createElement(_e,{handleSearch:Q,placeholder:"Search here"})),r.a.createElement(Pe,{columns:T,data:l,sortColumn:P,onSort:function(e){N(e),F(e)}}),0===l.length&&!b&&r.a.createElement(Ee,{className:"spinner mt-5 pt-5 mb-5"}),b&&r.a.createElement("h6",{className:"mt-2 mb-5"},"No records found!"),l.length>0&&r.a.createElement(Me,null)),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n\n        .spinner {\n          margin-bottom: 200px !important;\n        }\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))}),Je=a(34),Ve=function(e){var t=e.client,a=(e.label,e.primary),c=e.secondary,s=e.modal,l=e.toggle,o=e.className,i=e.title,u=Object(_.a)(e,["client","label","primary","secondary","modal","toggle","className","title"]),m=Object(n.useState)(null),p=Object(G.a)(m,2),b=p[0],f=p[1],h=function(e,t){var a=new Date(e),n=new Date(a);return n.setMonth(a.getMonth()+g(t)),P(n)},g=function(e){switch(e){case"monthly":return 1;case"quarterly":return 3;case"semi":return 6;case"annually":return 12;default:return 0}},E=new Date(Date.now()).toISOString();return r.a.createElement(Ue.a,Object.assign({isOpen:s,toggle:l,className:"".concat(o)},u),r.a.createElement(Be.a,{toggle:l},i),r.a.createElement(Re.a,null,r.a.createElement("p",null,"Policy #: ",t.codeNo),r.a.createElement("p",null,"Name: ","".concat(t.firstname," ").concat(t.lastname)),r.a.createElement("p",null,"Date Insured: ",P(E)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"mode"},"Mode of Payment"),r.a.createElement(Oe.a,{isSearchable:!0,isClearable:!0,value:b,onChange:function(e){f(e)},options:[{id:1,value:"monthly",label:"Monthly"},{id:2,value:"quarterly",label:"Quarterly"},{id:3,value:"semi",label:"Semi-Annually"},{id:4,value:"annually",label:"Annually"}]}),!b&&r.a.createElement("p",{className:"error-message text-danger p-1"},'"Mode of Payment is not allowed to be empty"'))),r.a.createElement(qe.a,null,r.a.createElement("button",{className:"btn btn-".concat(a&&a.type||"primary"," btn-sm"),name:"primary",onClick:function(e){b&&(l(e,Object(d.a)({},t,{dateInsured:E,expiredDate:h(t.dateInsured,b?b.value:""),mode:b?b.value:"",userInsured:O.getCurrentUser().id})),f(null))}},a&&a.label||"Ok"),r.a.createElement("button",{className:"btn btn-".concat(c&&c.type||"secondary"," btn-sm"),name:"secondary",onClick:function(e){l(e),f(null)}},c&&c.label||"Cancel")))},Ye=function(e){e.label;var t=e.primary,a=e.secondary,c=e.modal,s=e.toggle,l=e.className,o=e.title,i=Object(_.a)(e,["label","primary","secondary","modal","toggle","className","title"]),u=Object(n.useState)(""),m=Object(G.a)(u,2),d=m[0],p=m[1],b=function(){return d?d&&!d.match(/^[a-zA-Z0-9-]+$/)?'"Policy Number" must only have a number and letter with hyphen':d&&15!==d.length?'"Policy Number" must be equal to 15 characters long':null:'"Policy Number" is not allowed to be empty'};return r.a.createElement(Ue.a,Object.assign({isOpen:c,toggle:s,className:"".concat(l)},i),r.a.createElement(Be.a,{toggle:s},o),r.a.createElement(Re.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"codeNo"},"Enter Policy Number"),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("input",{name:"codeNo",id:"codeNo",value:d,onChange:function(e){return p(e.target.value)},className:"form-control"})),r.a.createElement("p",{className:"error-message text-danger p-1"},b()),r.a.createElement("style",{jsx:""},"\n            .error-message {\n              font-size: 13px;\n            }\n          "))),r.a.createElement(qe.a,null,r.a.createElement("button",{className:"btn btn-".concat(t&&t.type||"primary"," btn-sm"),name:"primary",onClick:function(e){b()||(s(e,d),p(null))}},t&&t.label||"Ok"),r.a.createElement("button",{className:"btn btn-".concat(a&&a.type||"secondary"," btn-sm"),name:"secondary",onClick:function(e){s(e),p(null)}},a&&a.label||"Cancel")))},He=function(e){var t=e.match.params.name,a=Object(n.useState)({path:"name",order:"asc"}),c=Object(G.a)(a,2),s=c[0],l=c[1],o=ge(t),i=o.reports,u=o.setReports,m=o.setRefresh,d=o.isLoaded,p=Object(n.useState)(null),b=Object(G.a)(p,2),f=b[0],h=b[1],E=Object(n.useContext)(H),v=E.onApproved,N=E.onCancelled,y=E.onRetrieved,w=E.onEnforced,x=function(e){if(!e)return"N/A";var t=new Date(P(e)),a=Date.now()-t.getTime(),n=new Date(a);return Math.abs(n.getUTCFullYear()-1970)},j=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return x(e.birthdate)}},{path:"gender",label:"Gender"},{path:"codeNo",label:"Code Number"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return P(e.dateInsured)}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(V.a,{to:"/clients/edit/".concat(e.id)},r.a.createElement("button",{className:"btn btn-sm btn-outline-warning ml-1"},"EDIT")),r.a.createElement("button",{onClick:function(t){N(e.id).then(function(e){return m(function(e){return!e})})},className:"btn btn-sm btn-outline-danger ml-1",name:"delete"},"CANCELLED")))}}],k=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return P(e.dateInsured)}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row d-flex-justify-content-center"},r.a.createElement("button",{onClick:function(t){h(e),W(t)},className:"btn btn-sm btn-outline-success ml-1",name:"delete"},"APPROVED"))}}],S=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return x(e.birthdate)}},{path:"gender",label:"Gender"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return P(e.dateInsured)}},{path:"expiredDate",label:"Due Date",content:function(e){return P(e.expiredDate)}},{path:"isLapsed",label:"Notify",content:function(e){return 1===e.isLapsed?r.a.createElement("span",{className:"fa fa-check text-info"}):r.a.createElement("span",{className:"fa fa-close text-danger"})}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row pl-1 pt-1 pr-1"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{onClick:function(t){h(e),L(t)},className:"btn btn-sm btn-outline-success ml-1",name:"delete"},"ENFORCED")))}}],C=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return x(e.birthdate)}},{path:"gender",label:"Gender"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return P(e.dateInsured)}},{path:"expiredDate",label:"Due Date",content:function(e){return P(e.expiredDate)}},{path:"isDue",label:"Notify",content:function(e){return 1===e.isDue?r.a.createElement("span",{className:"fa fa-check text-info"}):r.a.createElement("span",{className:"fa fa-close text-danger"})}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("button",{onClick:function(t){h(e),L(t)},className:"btn btn-sm btn-outline-success ml-1",name:"delete"},"ENFORCED"))}}],A=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return x(e.birthdate)}},{path:"gender",label:"Gender"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return P(e.dateInsured)}},{path:"expiredDate",label:"Due Date",content:function(e){return P(e.expiredDate)}},{path:"isNear",label:"Notify",content:function(e){return 1===e.isNear?r.a.createElement("span",{className:"fa fa-check text-info"}):r.a.createElement("span",{className:"fa fa-close text-danger"})}}],I=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return x(e.birthdate)}},{path:"gender",label:"Gender"},{path:"codeNo",label:"Code Number"},{path:"mode",label:"Mode"},{path:"dateInsured",label:"Date Insured",content:function(e){return P(e.dateInsured)}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("button",{onClick:function(t){y(e.id).then(function(e){return m(function(e){return!e})})},className:"btn btn-sm btn-outline-success ml-1",name:"delete"},"RETRIEVED")}}],F=[{path:"id",label:"#"},{path:"firstname",label:"Fullname",content:function(e){return"".concat(e.firstname,", ").concat(e.lastname," ").concat(e.middlename)}},{path:"birthdate",label:"Age",content:function(e){return x(e.birthdate)}},{path:"gender",label:"Gender"},{path:"codeNo",label:"Policy #"},{path:"coverage",label:"Coverage(Year)"}],T=[{path:"id",label:"#"},{path:"username",label:"Username"},{path:"profile.lastname",key:"fullname",label:"Fullname",content:function(e){return e.profile?"".concat(e.profile.firstname,", ").concat(e.profile.middlename," ").concat(e.profile.lastname):""}},{path:"position",label:"Position"},{path:"profile.branch.name",label:"Branch"},{path:"profile.codeNo",key:"codeNo",label:"Code #",content:function(e){var t=e.profile;return t?t.codeNo:""}},{key:"actions",label:"Actions",content:function(e){return r.a.createElement("button",{onClick:function(){return(t=e.id,g.sendJwt(O.jwt()),g.get("/api/users/restore/".concat(t)).then(function(e){return e.data})).then(function(e){return m(function(e){return!e})});var t},className:"btn btn-sm btn-outline-primary ml-1"},"RESTORE")}}],M=function(){switch(t){case"enforced":return j;case"for-approval":return k;case"lapsed":return S;case"due":return C;case"cancelled":return I;case"near-expiration":return A;case"gpa":return F;case"user-archived":return T}},U=Object(n.useState)(!1),B=Object(G.a)(U,2),R=B[0],q=B[1],L=function(e,t){q(function(e){return!e}),e.target&&"primary"===e.target.name&&w(t).then(function(e){m(function(e){return!e}),h(null)})},_=Object(n.useState)(!1),J=Object(G.a)(_,2),Y=J[0],z=J[1],W=function(e,t){z(function(e){return!e}),e.target&&"primary"===e.target.name&&v(f.id,t).then(function(e){h(null),m(function(e){return!e})})};return r.a.createElement(r.a.Fragment,null,f&&function(e){return r.a.createElement(Ve,{client:e,title:"Cocolife",modal:R,toggle:L,label:"Enforce ".concat(e.firstname,"?"),primary:{type:"primary",label:"CONFIRM"}})}(f),r.a.createElement(Ye,{title:"Cocolife",modal:Y,toggle:W,primary:{type:"primary",label:"CONFIRM"}}),r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},function(){switch(t){case"enforced":return"Enforced Policy";case"for-approval":return"For Approval";case"lapsed":return"Lapsed Policy";case"due":return"Due Policy";case"cancelled":return"Cancelled Policy";case"near-expiration":return"Near Expiration";case"gpa":return"GPA";case"user-archived":return"User Archived";default:return"Reports"}}()),r.a.createElement("button",{className:"btn btn-sm btn-grad-primary "},r.a.createElement("span",{className:"fa fa-print mr-1"}),"PRINT")),r.a.createElement("div",{className:"wrapper-client"},r.a.createElement(Ee,{isLoaded:d,className:"spinner mt-5 pt-5"},r.a.createElement(Pe,{columns:O.isPromo()?Object(Je.a)(M()).filter(function(e){return"actions"!==e.key}):M(),data:i,sortColumn:s,onSort:function(e){l(e),u(D(i,e))}})),d&&0===i.length&&r.a.createElement("h6",{className:"mt-2 mb-5"},"No records found!")),r.a.createElement("style",{jsx:""},"\n        .fa-print {\n          margin-top: 0 !important;\n        }\n      \n        .wrapper-client {\n          margin: 0;\n          padding: 0;\n          height: 550px;\n          overflow-x: hidden;\n          overflow-y: auto;\n        }\n        \n      "))},ze=function(){return r.a.createElement("div",{className:"col-12 pt-3 mb-3 footer d-flex justify-content-center"},r.a.createElement("p",{className:"text-white"},"Copyright 2019"),r.a.createElement("style",{jsx:""},"\n        .footer {\n          background-color: #343a40;\n          border-radius: 0 0 7px 7px;\n          height: 60px !important;\n        }\n      "))},We=function(e,t){var a=t.payload;switch(t.type){case"SET_PAGENUM":return Object(d.a)({},e,{pageNum:a});case"SET_ITEMS":return Object(d.a)({},e,{items:a});case"SET_PAGES":return Object(d.a)({},e,{pages:a});case"SET_TOTAL":return Object(d.a)({},e,{total:a});case"SET_START":return Object(d.a)({},e,{start:a});case"SET_END":return Object(d.a)({},e,{end:a});case"SET_REFRESH":return Object(d.a)({},e,{toggle:a});case"SEARCH_ITEMS":return Object(d.a)({},e,{title:a});case"SET_NOT_FOUND":return Object(d.a)({},e,{notFound:a});case"SET_STATUS":return Object(d.a)({},e,{status:a});case"SET_UNVERIFY":return Object(d.a)({},e,{unverify:a});default:return e}},$e=function(e){var t=e.request,a=e.data,r=void 0===a?"data":a,c=e.pages,s=void 0===c?"lastPage":c,l=e.total,o=void 0===l?"total":l,i=e.take,u=void 0===i?15:i,m={items:[],pageNum:1,status:null,unverify:0,pages:0,total:0,take:u,toggle:!1,start:1,end:h.c.pageNumbers,notFound:!1},p=Object(n.useReducer)(We,m),b=Object(G.a)(p,2),f=b[0],g=f.toggle,E=f.title,v=f.status,N=f.pageNum,y=Object(_.a)(f,["toggle","title","status","pageNum"]),w=b[1];return Object(n.useEffect)(function(){t(N,u,E,v).then(function(e){w({type:"SET_ITEMS",payload:e[r]}),w({type:"SET_PAGES",payload:e[s]}),w({type:"SET_TOTAL",payload:e[o]}),w({type:"SET_UNVERIFY",payload:e.unverify}),w({type:"SET_NOT_FOUND",payload:!1})}).catch(function(e){var t=e.response;t&&404===t.status&&(w({type:"SET_ITEMS",payload:[]}),w({type:"SET_PAGES",payload:0}),w({type:"SET_PAGENUM",payload:1}),w({type:"SET_NOT_FOUND",payload:!0}),w({type:"SET_UNVERIFY",payload:0}))})},[g,E,N,v]),Object(n.useEffect)(function(){w({type:"SET_ITEMS",payload:[]})},[E,N]),{state:Object(d.a)({toggle:g,status:v,pageNum:N,take:u},y),dispatch:w}},Ze=Object(n.memo)(function(e){var t=$e({request:fe,take:h.c.perPage}),a=t.state,n=a.pageNum,c=a.items,s=a.pages,l=a.total,o=Object(_.a)(a,["pageNum","items","pages","total"]),i=t.dispatch,u=function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Je.a)(c),e.prev=1,n=a.filter(function(e){return e.id!==t.id}),i({type:"SET_ITEMS",payload:n}),e.next=6,r=t.id,g.sendJwt(O.jwt()),g.delete("/api/users/".concat(r)).then(function(e){return e.data});case 6:return e.abrupt("return",n.length>0);case 9:return e.prev=9,e.t0=e.catch(1),i({type:"SET_ITEMS",payload:a}),e.abrupt("return",a.length>0);case 13:case"end":return e.stop()}var r},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Y.Provider,{value:{state:Object(d.a)({users:c,pages:s,pageNum:n,total:l},o),onDelete:u,onRefresh:function(){i({type:"SET_REFRESH",payload:function(e){return!e}})},onPageChange:function(e){i({type:"SET_PAGENUM",payload:e})},onSort:function(e){i({type:"SET_ITEMS",payload:D(c,e)})},onSearch:function(e){i({type:"SEARCH_ITEMS",payload:e})},onSetStart:function(e){i({type:"SET_START",payload:e})},onSetEnd:function(e){i({type:"SET_END",payload:e})},onSetStatus:function(e){i({type:"SET_STATUS",payload:e})}}},e.children)}),Qe=function(e){var t=Object(n.useState)({}),a=Object(G.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)(function(){Q().then(function(e){return s(e)})},[]);var l=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(p.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,a);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t,a);case 2:return e.t0=s,e.next=5,Q();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(H.Provider,{value:{status:c,onAddClient:l,onApproved:o,onCancelled:i,onRetrieved:u,onEnforced:d,onUpdateClient:f,getClient:b}},e.children)},Xe=function(e){var t=e.match.params.id,a=Object(n.useState)({username:"",profile:{firstname:"",middlename:"",lastname:"",branch:{manager:""}}}),c=Object(G.a)(a,2),s=c[0],l=c[1];Object(n.useEffect)(function(){he(t).then(function(e){l(e)}).catch(function(){return e.history.replace("/not-found")})},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"User Overview")),r.a.createElement(Ee,{isLoaded:""!==s.username,className:"spinner"},r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-4 pr-0"},r.a.createElement("div",{className:"card",style:{width:"auto"}},r.a.createElement("img",{style:{padding:"10%",backgroundColor:"#343a40",height:"303px"},src:"".concat(h.b,"/user.png"),className:"card-img-top",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"".concat(U(s.profile.lastname),", ").concat(U(s.profile.firstname)," ").concat(U(s.profile.middlename))),r.a.createElement("p",{className:"card-subtitle"},U(s.username)),r.a.createElement("span",{className:"mt-4 badge badge-".concat(1===s.status?"success":"danger")},1===s.status?"active":"unverify")))),r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"card",style:{width:"auto"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Personal Details"),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Firstname:"," ",r.a.createElement("span",{className:"text-secondary"},U(s.profile.firstname))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Middlename:"," ",r.a.createElement("span",{className:"text-secondary"},U(s.profile.middlename))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Lastname:"," ",r.a.createElement("span",{className:"text-secondary"},U(s.profile.lastname))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Email:"," ",r.a.createElement("span",{className:"text-secondary"},s.profile.email)))),r.a.createElement("div",{className:"card mt-3",style:{width:"auto"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Employment Details"),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Position:","   ",r.a.createElement("span",{className:"text-secondary"},U(s.position))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Branch:","   ",r.a.createElement("span",{className:"text-secondary"},U(s.profile.branch?s.profile.branch.name:""))),r.a.createElement("br",null),r.a.createElement("p",{className:"card-subtitle"},"Code Number:","   ",r.a.createElement("span",{className:"text-secondary"},U(s.profile.codeNo))),r.a.createElement("br",null),"manager"!==s.position&&"admin"!==s.position&&r.a.createElement("p",{className:"card-subtitle"},"Under by:","   ",r.a.createElement("span",{className:"text-secondary"},U(s.profile.branch.manager)+" - manager"))))))),r.a.createElement("style",{jsx:""},"\n         \n          .spinner {\n            margin-top: 200px;\n            margin-bottom: 200px;\n          }\n        "))},Ke=J(function(e){e.auth;var t=Object(_.a)(e,["auth"]),a=Object(n.useContext)(Y).onRefresh,c=t.match.params.id,s=Object(n.useState)({username:"",email:"",firstname:"",middlename:"",lastname:"",manager:"",codeNo:"",position:"",branch:""}),l=Object(G.a)(s,2),i=l[0],u=l[1],b=Object(n.useState)(!1),f=Object(G.a)(b,2),h=f[0],g=f[1];Object(n.useEffect)(function(){g(!1),he(c).then(function(e){var t=e.profile,a=e.username,n=e.position;u({username:a,email:t.email,firstname:t.firstname,middlename:t.middlename,lastname:t.lastname,codeNo:t.codeNo,manager:t.branch?t.branch.manager:"",branch:t.branch?t.branch.name:"",position:n}),k({id:"sales"===n?1:2,value:n,label:U(n+("manager"!==n?" officer":""))}),I({id:t.branch_id,value:t.branch?t.branch.name:"",label:U(t.branch?t.branch.name:"")}),se("manager"===n?"/api/branches/available":"/api/branches/taken").then(function(e){w(e),g(!0)})})},[]);var E=[{id:1,label:"Sales Officer",value:"sales"},{id:2,label:"Promo Officer",value:"promo"}],v=Object(n.useState)([]),N=Object(G.a)(v,2),y=N[0],w=N[1],x=Object(n.useState)([]),j=Object(G.a)(x,2),O=j[0],k=j[1],S=Object(n.useState)(null),C=Object(G.a)(S,2),D=C[0],I=C[1],P=Object(n.useState)({}),T=Object(G.a)(P,2),M=T[0],B=T[1],R={username:A.a.string().required().min(6).label("Username"),email:A.a.string().required().label("Email"),firstname:F("Firstname"),middlename:F("Middlename"),lastname:F("Lastname"),position:A.a.string().required().label("Position"),branch:A.a.string().required().label("Branch"),manager:A.a.optional(),codeNo:A.a.number().required().min(8).label("Code Number")},q=function(e){return k(e)},L=function(e){I(e),V()&&e&&pe(e.id).then(function(t){u(Object(d.a)({},i,{manager:t,branch:e.value}))})},J=function(){var e=Object(p.a)(m.a.mark(function e(n,r){var s,l,i,u,d,p,b,f,h,g;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.username,l=r.email,i=r.password,u=r.firstname,d=r.middlename,p=r.lastname,b=r.position,f=r.codeNo,h={username:s,password:i,position:b,profile:{firstname:u,middlename:d,lastname:p,email:l,codeNo:f,branch_id:D?D.id:null}},e.prev=2,e.next=5,me(c,h);case 5:o.toast.success("Updated!"),B(M),a(),t.history.replace("/users"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),(g=e.t0.response)&&400===g.status&&o.toast.error(g.data.status.errors[0].message);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}(),V=function(){return"manager"!==i.position&&"admin"!==i.position};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Edit User")),r.a.createElement(Ee,{isLoaded:h,className:"spinner"},r.a.createElement(ke,{data:{data:i,setData:u},errors:{errors:M,setErrors:B},onSubmit:J,schema:R},function(e){var a=e.renderInput,n=e.renderSelect,c=e.renderButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col-6 pl-5 pr-3 pt-4"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("position","Position",O,q,E,{isDisabled:"manager"===i.position}),a("codeNo","Code Number"),n("branch","Branch",D,L,y),V()&&a("manager","Manager","manager","",{disabled:!0})),r.a.createElement("div",{className:"col-6 pl-3 pr-5 pt-4"},a("username","Username","text","fa-user"),a("email","Email","email","fa-envelope"),c("Update",null,"Updating...",!0),r.a.createElement("button",{onClick:function(e){e.preventDefault(),t.history.replace("/users")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back"))))})),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n        .row {\n          border-radius: 5px;\n        }\n        .side-content {\n          background-color: #343a40;\n          border-radius: 0 5px 5px 0;\n        }\n        .spinner {\n          margin-top: 200px;\n          margin-bottom: 200px;\n        }\n      "))}),et=J(function(e){var t=e.auth,a=Object(_.a)(e,["auth"]),c=Object(n.useState)({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",branch:"",confirmPassword:""}),s=Object(G.a)(c,2),l=s[0],i=s[1],u=Object(n.useContext)(Y).onRefresh,b=Object(n.useState)([]),f=Object(G.a)(b,2),h=f[0],g=f[1],E=Object(n.useState)(!1),v=Object(G.a)(E,2),N=v[0],y=v[1],w=function(e){se("/api/branches/available").then(function(t){e(t),y(t.length>0)})};Object(n.useEffect)(function(){w(g)},[]);var x=Object(n.useState)(null),j=Object(G.a)(x,2),O=j[0],k=j[1],S=Object(n.useState)({}),C=Object(G.a)(S,2),D=C[0],I=C[1],P={username:A.a.string().required().min(6).label("Username"),email:A.a.string().required().label("Email"),password:A.a.string().required().min(6).label("Password"),confirmPassword:A.a.string().required().valid(A.a.ref("password")).options({language:{any:{allowOnly:"not match"}}}).label("Password"),firstname:F("Firstname"),middlename:F("Middlename"),lastname:F("Lastname"),branch:A.a.string().required().label("Branch"),codeNo:A.a.number().required().min(8).label("Code Number")},T=function(){var e=Object(p.a)(m.a.mark(function e(a){var n,r,c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.currentTarget,e.next=3,t.isUsernameTaken(n.value);case 3:return r=e.sent,c=r.isTaken,s=Object(d.a)({},D),c&&(s[n.name]='"'.concat(n.value,'" is taken')),I(s),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(m.a.mark(function e(t,n){var r,c,s,l,d,p,b,f,h,E;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.username,c=n.email,s=n.password,l=n.firstname,d=n.middlename,p=n.lastname,b=n.codeNo,e.next=3,T(t);case 3:if(f=e.sent,!(Object.keys(f).length>0)){e.next=7;break}return I(f),e.abrupt("return");case 7:return h={username:r,password:s,position:"manager",profile:{firstname:l,middlename:d,lastname:p,email:c,codeNo:b,branch_id:O?O.id:0}},e.prev=8,e.next=11,ie(h);case 11:o.toast.success("Created!"),i({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",confirmPassword:""}),k(null),w(g),I(f),u(),a.history.replace("/users"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),!(E=e.t0.response)||400!==E.status&&401!==E.status||o.toast.error(E.data.status.errors);case 24:case"end":return e.stop()}},e,this,[[8,20]])}));return function(t,a){return e.apply(this,arguments)}}(),U=function(e){k(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-12 d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-4 border-bottom"},r.a.createElement("h1",{className:"h2"},"Add New Manager")),r.a.createElement(ke,{data:{data:l,setData:i},errors:{errors:D,setErrors:I},onSubmit:M,schema:P},function(e){var t=e.renderInput,n=e.renderSelect,c=e.renderButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-3 mr-0"},r.a.createElement("div",{className:"col-6 pl-3 pr-2 pt-3"},t("firstname","Firstname"),t("middlename","Middlename"),t("lastname","Lastname"),t("codeNo","Code Number"),!N&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"No Available Branch"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return a.history.replace("/branches/new")},className:"btn btn-sm btn-outline-success ml-1"},r.a.createElement("span",{className:"fa fa-plus mr-1"}),"BRANCH")),N&&n("branch","Available Branch",O,U,h)),r.a.createElement("div",{className:"col-6 pl-2 pr-3 pt-3"},t("username","Username","text","fa-user",{onBlur:T}),t("email","Email","email","fa-envelope"),t("password","Password","password","fa-key"),t("confirmPassword","Confirm Password","password","fa-key"),c("Add",null,"Saving...",!0))))}),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n        .row {\n          border-radius: 7px;\n        }\n        .side-content {\n          background-color: #343a40;\n          border-radius: 7px 0 0 7px;\n        }\n        .fa-plus {\n          margin-top: 0 !important;\n        }\n      "))}),tt=function(e){var t=e.match.params.id,a=Object(n.useState)(!1),c=Object(G.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)({name:"",address:"",contact:""}),u=Object(G.a)(i,2),d=u[0],b=u[1],f=Object(n.useState)({}),h=Object(G.a)(f,2),E=h[0],v=h[1];Object(n.useEffect)(function(){l(!1),function(e){return g.get("/api/branches/show/"+e).then(function(e){return e.data})}(t).then(function(e){var t=e.branch,a=t.name,n=t.address,r=t.contact;b({name:a,address:n,contact:r}),l(!0)})},[]);var N={name:A.a.string().required().label("Name"),address:A.a.optional(),contact:A.a.optional()},y=function(){var a=Object(p.a)(m.a.mark(function a(n,r){var c;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:try{oe(t,r).then(function(){return e.history.replace("/branches")}),o.toast.success("Saved")}catch(n){(c=n.response)&&401===c.status&&o.toast.error(c.data.status.errors)}case 1:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Branch")),r.a.createElement(Ee,{isLoaded:s,className:"spinner"},r.a.createElement("div",{className:"col-6 offset-3"},r.a.createElement(ke,{data:{data:d,setData:b},errors:{errors:E,setErrors:v},onSubmit:y,schema:N},function(e){var t=e.renderInput,a=e.renderButton,n=e.renderTextArea;return r.a.createElement(r.a.Fragment,null,t("name","Name","name",""),n("address","Address","address"),t("contact","Contact","contact"),a("UPDATE",null,"Updating...",!0))}),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/branches")},className:"btn btn-grad-secondary btn-block mt-3",name:"back"},"Back"))),r.a.createElement("style",{jsx:""},"\n        .spinner {\n          margin-top: 200px;\n        }\n      "))},at=function(e){var t=e.match.params.id,a=Object(n.useState)(!1),c=Object(G.a)(a,2),s=c[0],l=c[1],i=Object(n.useContext)(H),u=i.getClient,b=i.onUpdateClient,f=(i.status,Object(n.useState)([])),h=Object(G.a)(f,2),g=h[0],E=h[1],v=Object(n.useState)({firstname:"",lastname:"",middlename:"",address:"",contact:"",dateInsured:"",expiredDate:"",birthdate:"",codeNo:"",promo:"",userInsured:"",gender:"",mode:"",civil:"",forApproval:!0}),N=Object(G.a)(v,2),y=N[0],w=N[1],x=Object(n.useState)(null),j=Object(G.a)(x,2),O=j[0],k=j[1],S=Object(n.useState)(null),C=Object(G.a)(S,2),D=C[0],I=C[1],M=Object(n.useState)(null),B=Object(G.a)(M,2),R=B[0],q=B[1],L=Object(n.useState)(null),J=Object(G.a)(L,2),V=J[0],Y=J[1],z=Object(n.useState)({}),W=Object(G.a)(z,2),$=W[0],Z=W[1];Object(n.useEffect)(function(){l(!1),u(t).then(function(e){var t=e.client,a=(t.id,t.coverage,t.isNear,t.isDue,t.isLapsed,Object(_.a)(t,["id","coverage","isNear","isDue","isLapsed"]));w(Object(d.a)({},a,{promo:a.promo.value,expiredDate:new Date(a.expiredDate).toLocaleDateString(),dateInsured:new Date(a.dateInsured).toLocaleDateString(),birthdate:a.birthdate?new Date(a.birthdate).toLocaleDateString():""})),Y({id:1,value:a?a.civil:"",label:U(a?a.civil:"")}),I({id:2,value:a?a.gender:"",label:U(a?a.gender:"")}),q({id:3,value:a?a.mode:"",label:U(a?a.mode:"")}),k(Object(d.a)({},a.promo,{label:U(a.promo?a.promo.label:"")})),l(!0)}),re().then(function(e){E(e)})},[]);var Q={firstname:F("Firstname"),middlename:F("Middlename"),lastname:F("Lastname"),codeNo:A.a.string().regex(/^[a-zA-Z0-9-]+$/).error(function(e){return e.forEach(function(e){switch(e.type){case"string.regex.base":e.message='"Policy Number" must only have a number and letter with hyphen';break;case"string.min":case"string.max":e.message='"Policy Number" must be equal to 15 characters long'}}),e}).min(15).max(15).label("Policy Number"),contact:T("Mobile Number"),address:A.a.optional(),expiredDate:A.a.optional(),dateInsured:A.a.string().required().label("Date Insured"),birthdate:A.a.string().required().label("Birthdate"),forApproval:A.a.optional(),userInsured:A.a.optional(),gender:A.a.string().required().label("Gender"),mode:A.a.string().required().label("Mode of Payment"),civil:A.a.string().required().label("Civil Status"),promo:A.a.string().required().label("Promo Officer")},X=function(e){return I(e)},K=function(e){return Y(e)},ee=function(e){if(q(e),e){var t=ae(y.dateInsured,e.value);w(Object(d.a)({},y,{mode:e.value,expiredDate:t}))}},te=function(e){return k(e)},ae=function(e,t){var a=new Date(e),n=new Date(a);return n.setMonth(a.getMonth()+oe(t)),P(n)},ne=function(){var e=Object(p.a)(m.a.mark(function e(a,n){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.codeNo){e.next=3;break}return Z({codeNo:'"Policy Number" is not allowed to be empty'}),e.abrupt("return");case 3:return r=ae(n.dateInsured,R.value),c=Object(d.a)({},n,{mode:R?R.value:"",dateInsured:new Date(n.dateInsured).toISOString(),expiredDate:new Date(r).toISOString(),birthdate:new Date(n.birthdate).toISOString(),promo:O.id}),e.prev=5,e.next=8,b(t,c);case 8:o.toast.success("Saved"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[5,11]])}));return function(t,a){return e.apply(this,arguments)}}(),ce=[{id:1,label:"Male",value:"male"},{id:2,label:"Female",value:"female"}],se=[{id:1,value:"single",label:"Single"},{id:2,value:"divorced",label:"Divorced"},{id:3,value:"widowed",label:"Widowed"}],le=[{id:1,value:"monthly",label:"Monthly"},{id:2,value:"quarterly",label:"Quarterly"},{id:3,value:"semi",label:"Semi-Annually"},{id:4,value:"annually",label:"Annually"}],oe=function(e){switch(e){case"monthly":return 1;case"quarterly":return 3;case"semi":return 6;case"annually":return 12;default:return 0}},ie=function(e){var t=R?ae(e,R.value):"";w(Object(d.a)({},y,{expiredDate:t,dateInsured:P(e)}))},ue=function(e){w(Object(d.a)({},y,{birthdate:P(e)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Edit Client")),r.a.createElement(Ee,{isLoaded:s,className:"spinner"},r.a.createElement(ke,{data:{data:y,setData:w},errors:{errors:$,setErrors:Z},onSubmit:ne,schema:Q},function(t){var a=t.renderInput,n=t.renderSelect,c=t.renderTextArea,s=t.renderDatePicker,l=t.renderButton;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a("firstname","Firstname"),a("middlename","Middlename"),a("lastname","Lastname"),n("gender","Gender",D,X,ce),n("civil","Civil Status",V,K,se),s("birthdate","Birthdate",{onChange:ue}),a("contact","Mobile Contact"),c("address","Address")),r.a.createElement("div",{className:"col-6"},s("dateInsured","Date Insured",{onChange:ie}),n("mode","Mode of Payment",R,ee,le),a("expiredDate","Due Date","text","",{disabled:!0}),n("promo","Promo Officer",O,te,g),a("codeNo","Policy No"),l("UPDATE",null,"Updating...",!0),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.replace("/reports/enforced")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back")))})),r.a.createElement("style",{jsx:""},"\n        .spinner {\n          margin-top: 200px;\n          margin-bottom: 200px;\n        }\n      "))},nt=function(e){var t=e.menu,a=e.sub,n=Object(_.a)(e,["menu","sub"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze,null,r.a.createElement(Qe,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row",style:{backgroundColor:"transparent",minHeight:"800px"}},r.a.createElement(z,null,r.a.createElement("main",{role:"main",className:"dashboard col-md-9 ml-sm-auto col-lg-10 pt-3 px-4 bg-light border border-secondary"},"dashboard"===t&&r.a.createElement(r.a.Fragment,null,"newFs"===a&&r.a.createElement(Se,n),"newGPA"===a&&r.a.createElement(Ce,n),!a&&r.a.createElement(ye,n)),"branches"===t&&r.a.createElement(r.a.Fragment,null,"editBranch"===a&&r.a.createElement(tt,n),"newBranch"===a&&r.a.createElement(Ae,n),!a&&r.a.createElement(Te,n)),"users"===t&&r.a.createElement(r.a.Fragment,null,"viewUser"===a&&r.a.createElement(Xe,n),"editUser"===a&&r.a.createElement(Ke,n),"newUser"===a&&r.a.createElement(et,n),!a&&r.a.createElement(Ge,n)),"reports"===t&&r.a.createElement(He,n),"clients"===t&&r.a.createElement(at,n))),r.a.createElement(ze,null))))),r.a.createElement("style",{jsx:""},"\n        .dashboard {\n          border-radius: 0px 7px 0 0;\n        }\n      "))},rt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"logo"}),r.a.createElement("style",{jsx:""},"\n        .logo {\n          width: 100%;\n          height: 100%;\n          border-radius: 5px 0 0 5px;\n          background-color: #343a40;\n        }\n      "))},ct=J(function(e){var t=e.auth,a=Object(_.a)(e,["auth"]),c=Object(n.useState)({username:"",password:""}),s=Object(G.a)(c,2),l=s[0],i=s[1],u=Object(n.useState)({}),d=Object(G.a)(u,2),b=d[0],f=d[1],h=(Object(n.useContext)(Y).onRefresh,{username:A.a.string().required().label("Username"),password:A.a.string().required().label("Password")}),g=function(){var e=Object(p.a)(m.a.mark(function e(n,r){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.login(r).then(function(){a.history.replace("/")}).catch(function(e){var t=e.response;t&&401===t.status&&o.toast.error(t.data.status.errors)});case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 mb-3 border border-secondary"},r.a.createElement("div",{className:"col-md-0 col-lg-8 p-0"},r.a.createElement(rt,null)),r.a.createElement("div",{className:"col-md-12 col-lg-4 p-3 pt-2"},r.a.createElement("h3",null,"Login"),r.a.createElement("hr",null),r.a.createElement(ke,{data:{data:l,setData:i},errors:{errors:b,setErrors:f},onSubmit:g,schema:h},function(e){var t=e.renderInput,a=e.renderButton;return r.a.createElement(r.a.Fragment,null,t("username","Username","text","fa-user"),t("password","Password","password","fa-key"),a("Login",null,"Logging in...",!0),r.a.createElement("p",{className:"mt-3 text-center"},"or"))}),r.a.createElement("button",{onClick:function(){a.history.replace("/sign-up")},className:"btn btn-grad-secondary btn-block",name:"createAgent"},"Create Agent"))),r.a.createElement("div",{className:"row mb-3 "},r.a.createElement("div",{className:"card text-center border border-secondary"},r.a.createElement("div",{className:"card-header bg-dark text-white"},"Featured"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Special title treatment"),r.a.createElement("p",{className:"card-text"},"It's a broader card with text below as a natural lead-in to extra content. This content is a little longer.")))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Special title treatment"),r.a.createElement("p",{className:"card-text"},"It's a broader card with text below as a natural lead-in to extra content. This content is a little longer.")))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Special title treatment"),r.a.createElement("p",{className:"card-text"},"It's a broader card with text below as a natural lead-in to extra content. This content is a little longer.")))))),r.a.createElement("div",{className:"card-footer text-muted"},"Copyright 2019"))),r.a.createElement("style",{jsx:""},"\n        .row {\n          border-radius: 5px !important;\n          background-color: white;\n        }\n        .col-8;\n      "))}),st=J(function(e){var t=e.auth,a=Object(_.a)(e,["auth"]),c=Object(n.useState)({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",manager:"",confirmPassword:"",position:"",branch:""}),s=Object(G.a)(c,2),l=s[0],i=s[1],u=[{id:1,label:"Sales Officer",value:"sales"},{id:2,label:"Promo Officer",value:"promo"}],b=Object(n.useState)([]),f=Object(G.a)(b,2),h=f[0],g=f[1],E=Object(n.useState)(!1),v=Object(G.a)(E,2),N=v[0],y=v[1],w=function(e){se("/api/branches/taken").then(function(t){e(t),y(t.length>0)})};Object(n.useEffect)(function(){w(g)},[]);var x=Object(n.useState)(null),j=Object(G.a)(x,2),O=j[0],k=j[1],S=Object(n.useState)(null),C=Object(G.a)(S,2),D=C[0],I=C[1],P=Object(n.useState)({}),T=Object(G.a)(P,2),M=T[0],U=T[1],B={username:A.a.string().required().min(6).label("Username"),email:A.a.string().required().label("Email"),password:A.a.string().required().min(6).label("Password"),confirmPassword:A.a.string().required().valid(A.a.ref("password")).options({language:{any:{allowOnly:"not match"}}}).label("Password"),firstname:F("Firstname"),middlename:F("Middlename"),lastname:F("Lastname"),position:A.a.string().required().label("Position"),branch:A.a.string().required().label("Branch"),codeNo:A.a.number().required().min(8).label("Code Number"),manager:A.a.optional()},R=function(e){return k(e)},q=function(e){I(e),i(Object(d.a)({},l,{manager:""})),e&&pe(e.id).then(function(t){i(Object(d.a)({},l,{manager:t,branch:e.value}))}).catch(function(e){var t=e.response;t&&404===t.status&&o.toast.error(t.data.status.error)})},L=function(){var e=Object(p.a)(m.a.mark(function e(a){var n,r,c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.currentTarget,e.next=3,t.isUsernameTaken(n.value);case 3:return r=e.sent,c=r.isTaken,s=Object(d.a)({},M),c&&(s[n.name]='"'.concat(n.value,'" is taken')),U(s),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(m.a.mark(function e(n,r){var c,s,l,u,d,p,b,f,h,E,v;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.username,s=r.email,l=r.password,u=r.firstname,d=r.middlename,p=r.lastname,b=r.codeNo,f=r.manager,e.next=3,L(n);case 3:if(h=e.sent,!(Object.keys(h).length>0)){e.next=7;break}return U(h),e.abrupt("return");case 7:return E={username:c,password:l,position:O?O.value:"",profile:{firstname:u,middlename:d,lastname:p,email:s,codeNo:b,branch:{manager:f},branch_id:D?D.id:0}},e.prev=8,e.next=11,t.signUp(E);case 11:o.toast.success("Please wait for verification!"),i({username:"",email:"",password:"",firstname:"",middlename:"",lastname:"",codeNo:"",manager:"",branch:"",position:"",confirmPassword:""}),k(null),I(null),w(g),U(h),a.history.replace("/login"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),!(v=e.t0.response)||400!==v.status&&401!==v.status||o.toast.error(v.data.status.errors);case 24:case"end":return e.stop()}},e,this,[[8,20]])}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke,{data:{data:l,setData:i},errors:{errors:M,setErrors:U},onSubmit:J,schema:B},function(e){var t=e.renderInput,n=e.renderSelect,c=e.renderButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 mb-3 border border-secondary"},r.a.createElement("div",{className:"side-content col-4"}),r.a.createElement("div",{className:"col-4 pl-3 pr-2 pt-3"},r.a.createElement("div",{className:"col-12  d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-4 border-bottom"},r.a.createElement("h1",{className:"h2"},"Sign Up Agent")),t("firstname","Firstname"),t("middlename","Middlename"),t("lastname","Lastname"),n("position","Position",O,R,u),t("codeNo","Code Number"),!N&&r.a.createElement("label",null,"No Available Branch"),N&&n("branch","Available Branch",D,q,h),t("manager","Manager","manager","",{disabled:!0})),r.a.createElement("div",{className:"col-4 pl-2 pr-3 pt-5 mt-5"},t("username","Username","text","fa-user",{onBlur:L}),t("email","Email","email","fa-envelope"),t("password","Password","password","fa-key"),t("confirmPassword","Confirm Password","password","fa-key"),c("Sign Up",null,"Signing up...",!0),r.a.createElement("button",{onClick:function(e){e.preventDefault(),a.history.replace("/login")},className:"btn btn-grad-secondary btn-block",name:"back"},"Back"),r.a.createElement("p",{className:"text-primary p-2 "},"*Note: Account needs to verify by manager to activate"))))}),r.a.createElement("style",{jsx:""},"\n        .col-4 {\n          padding: 0;\n        }\n        .row {\n          background-color: white;\n          border-radius: 7px;\n        }\n        .side-content {\n          background-color: #343a40;\n          border-radius: 7px 0 0 7px;\n        }\n      "))}),lt=function(){return r.a.createElement("h1",null,"Not Found")},ot=J(function(e){var t=e.isAdminOrManager,a=void 0!==t&&t,n=e.isAdmin,c=void 0!==n&&n,s=e.auth,l=(e.path,e.component),o=e.render,i=Object(_.a)(e,["isAdminOrManager","isAdmin","auth","path","component","render"]);return r.a.createElement(q.a,Object.assign({},i,{render:function(e){return s.isValidUser()?a&&!s.isAdminOrManager()?r.a.createElement(L.a,{to:"/not-found"}):c&&!s.isAdmin()?r.a.createElement(L.a,{to:"/not-found"}):l?r.a.createElement(l,e):o(e):r.a.createElement(L.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),it=J(function(e){var t=e.auth,a=(e.path,e.component),n=e.render,c=Object(_.a)(e,["auth","path","component","render"]);return r.a.createElement(q.a,Object.assign({},c,{render:function(e){return t.isValidUser()?r.a.createElement(L.a,{to:{pathname:"/",state:{from:e.location}}}):a?r.a.createElement(a,e):n(e)}}))}),ut=function(e){return r.a.createElement(R.a,null,r.a.createElement(ot,{path:"/dashboard/new-fs",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"dashboard",sub:"newFs"}))}}),r.a.createElement(ot,{path:"/dashboard/new-gpa",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"dashboard",sub:"newGPA"}))}}),r.a.createElement(ot,{path:"/dashboard",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"dashboard"}))}}),r.a.createElement(ot,{path:"/branches/edit/:id",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"branches",sub:"editBranch"}))}}),r.a.createElement(ot,{path:"/branches/new",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"branches",sub:"newBranch"}))}}),r.a.createElement(ot,{path:"/branches",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"branches"}))}}),r.a.createElement(ot,{path:"/agents",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"agents"}))}}),r.a.createElement(ot,{isAdmin:!0,path:"/users/new",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"users",sub:"newUser"}))}}),r.a.createElement(ot,{isAdminOrManager:!0,path:"/users/edit/:id",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"users",sub:"editUser"}))}}),r.a.createElement(ot,{path:"/users/:id",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"users",sub:"viewUser"}))}}),r.a.createElement(ot,{path:"/users",isAdminOrManager:!0,render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"users"}))}}),r.a.createElement(ot,{path:"/reports/:name",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"reports"}))}}),r.a.createElement(ot,{path:"/reports",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"reports"}))}}),r.a.createElement(ot,{path:"/clients/edit/:id",render:function(e){return r.a.createElement(nt,Object.assign({},e,{menu:"clients"}))}}),r.a.createElement(it,{path:"/login",render:function(e){return r.a.createElement(ct,e)}}),r.a.createElement(it,{path:"/sign-up",component:st}),r.a.createElement(q.a,{path:"/not-found",component:lt}),">",r.a.createElement(L.a,{from:"/",exact:!0,to:"/dashboard"}),r.a.createElement(L.a,{to:"/not-found"}))},mt=(a(120),a(122),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(o.ToastContainer,{autoClose:5e3}),r.a.createElement("div",{className:"container"},r.a.createElement(ut,null))))}),dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(124),a(126);s.a.render(r.a.createElement(l.a,null,r.a.createElement(mt,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");dt?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):pt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):pt(t,e)})}}()},13:function(e){e.exports={a:"http://127.0.0.1:3333",b:"http://127.0.0.1:3000",c:{perPage:8,pageNumbers:3},d:{primary:"#a178df",secondary:"#02aab0"}}},64:function(e,t,a){e.exports=a(128)},69:function(e,t,a){}},[[64,2,1]]]);
//# sourceMappingURL=main.6de4af7d.chunk.js.map